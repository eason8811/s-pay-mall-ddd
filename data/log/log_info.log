25-03-14.14:39:44.926 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 111600 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.14:39:44.927 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.14:39:45.755 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.14:39:45.766 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.14:39:45.767 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.14:39:45.767 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.14:39:45.822 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.14:39:45.823 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 868 ms
25-03-14.14:39:46.475 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.14:39:46.715 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.14:39:46.727 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.14:39:46.730 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.14:39:46.856 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#34c53688:0/SimpleConnection@2fa212df [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=62130]
25-03-14.14:39:46.935 [main            ] INFO  Application            - Started Application in 2.369 seconds (process running for 2.752)
25-03-14.15:06:36.902 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.15:06:37.444 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.15:06:37.445 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.15:06:37.520 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.15:06:41.005 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 123364 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.15:06:41.006 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.15:06:41.808 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.15:06:41.819 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.15:06:41.820 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.15:06:41.820 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.15:06:41.877 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.15:06:41.878 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 839 ms
25-03-14.15:06:42.555 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.15:06:42.808 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.15:06:42.822 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.15:06:42.823 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.15:06:42.862 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#2eb0cefe:0/SimpleConnection@533e2f4 [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=62147]
25-03-14.15:06:42.905 [main            ] INFO  Application            - Started Application in 2.316 seconds (process running for 2.843)
25-03-14.15:07:10.110 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.15:07:11.102 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.15:07:11.104 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.15:07:11.232 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.20:22:38.388 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 13944 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.20:22:38.390 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.20:22:39.199 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.20:22:39.209 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.20:22:39.209 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.20:22:39.209 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.20:22:39.274 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.20:22:39.274 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 854 ms
25-03-14.20:22:39.973 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.20:22:40.204 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.20:22:40.217 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.20:22:40.218 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.20:22:40.255 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6ffd4c0d:0/SimpleConnection@6591f8ea [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=62268]
25-03-14.20:22:40.299 [main            ] INFO  Application            - Started Application in 2.305 seconds (process running for 2.704)
25-03-14.20:34:57.844 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.20:34:57.845 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.20:34:57.845 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-03-14.20:34:57.905 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.20:34:57.965 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.20:34:58.135 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1c4516c0
25-03-14.20:34:58.137 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.20:34:58.262 [http-nio-8081-exec-1] ERROR PayController          - 创建订单错误! 错误信息: 
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLException: Field 'market_type' doesn't have a default value
### The error may exist in xin/eason/infrastructure/dao/OrderMapper.java (best guess)
### The error may involve xin.eason.infrastructure.dao.OrderMapper.insert-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO pay_order  ( user_id, product_id, product_name, order_id, order_time, total_amount, status,      create_time, update_time )  VALUES (  ?, ?, ?, ?, ?, ?, ?,      ?, ?  )
### Cause: java.sql.SQLException: Field 'market_type' doesn't have a default value
; Field 'market_type' doesn't have a default value
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:258)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy86.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:59)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy2/jdk.proxy2.$Proxy87.insert(Unknown Source)
	at xin.eason.infrastructure.adapter.repository.OrderRepository.doSaveOrder(OrderRepository.java:95)
	at xin.eason.domain.order.service.OrderService.doSaveOrder(OrderService.java:40)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:84)
	at xin.eason.trigger.http.PayController.pay(PayController.java:47)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLException: Field 'market_type' doesn't have a default value
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:48)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:75)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 60 common frames omitted
25-03-14.20:36:07.186 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.20:36:26.763 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 163996 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.20:36:26.765 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.20:36:27.606 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.20:36:27.617 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.20:36:27.618 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.20:36:27.618 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.20:36:27.679 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.20:36:27.680 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 884 ms
25-03-14.20:36:28.419 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.20:36:28.667 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.20:36:28.681 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.20:36:28.683 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.20:36:28.719 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#2eb0cefe:0/SimpleConnection@6475e778 [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=59746]
25-03-14.20:36:28.760 [main            ] INFO  Application            - Started Application in 2.441 seconds (process running for 3.012)
25-03-14.20:36:29.830 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.20:36:29.830 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.20:36:29.831 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-03-14.20:36:29.899 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.20:36:29.965 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.20:36:30.108 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@324f7dae
25-03-14.20:36:30.109 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.20:37:02.504 [http-nio-8081-exec-1] ERROR PayPort                - 营销锁单失败 userId: Eason4, orderItemId: 586261945920
java.net.SocketTimeoutException: timeout
	at okio.Okio$4.newTimeoutException(Okio.java:232)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:286)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:118)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:89)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.SocketException: Socket closed
	at java.base/sun.nio.ch.NioSocketImpl.endRead(NioSocketImpl.java:253)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:332)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	... 75 common frames omitted
25-03-14.20:37:32.494 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=48s770ms81µs700ns).
25-03-14.20:37:32.495 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='586261945920', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=eACYyvZqJnY05eOnuUEkKjv5FvsqfMbHqPUabuQaO7P9MzgrBrHPRj7DSgcdobKLjocK5IhordhH6ZJvLYr38Q%2BpMnVthG0Kh3CNEpwC13k7IujVWT79EiA7hCsfMJvrOANKnpoRlOMftisWenmRxLnY9aAF4fhqojWaAwyOv%2FEqrp7ojCYIrFqS2lAUPIdGS3ESeMetSDLNjINnClkx37DKCRt5NTMFImFtMRRqcqxlwTnYbkjk7r1N09UON2kBTtT%2Ft2R92Hmeq%2FO9u3cWyhh5VO1peRlw6LLArx4Pq5LjfLHUS09qGYdYM7m%2BOm3QZu8ju8f59rFPvd6URTBdNw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A37%3A02&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;586261945920&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:37:32.512 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=eACYyvZqJnY05eOnuUEkKjv5FvsqfMbHqPUabuQaO7P9MzgrBrHPRj7DSgcdobKLjocK5IhordhH6ZJvLYr38Q%2BpMnVthG0Kh3CNEpwC13k7IujVWT79EiA7hCsfMJvrOANKnpoRlOMftisWenmRxLnY9aAF4fhqojWaAwyOv%2FEqrp7ojCYIrFqS2lAUPIdGS3ESeMetSDLNjINnClkx37DKCRt5NTMFImFtMRRqcqxlwTnYbkjk7r1N09UON2kBTtT%2Ft2R92Hmeq%2FO9u3cWyhh5VO1peRlw6LLArx4Pq5LjfLHUS09qGYdYM7m%2BOm3QZu8ju8f59rFPvd6URTBdNw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A37%3A02&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;586261945920&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:37:32.512 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 586261945920 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=eACYyvZqJnY05eOnuUEkKjv5FvsqfMbHqPUabuQaO7P9MzgrBrHPRj7DSgcdobKLjocK5IhordhH6ZJvLYr38Q%2BpMnVthG0Kh3CNEpwC13k7IujVWT79EiA7hCsfMJvrOANKnpoRlOMftisWenmRxLnY9aAF4fhqojWaAwyOv%2FEqrp7ojCYIrFqS2lAUPIdGS3ESeMetSDLNjINnClkx37DKCRt5NTMFImFtMRRqcqxlwTnYbkjk7r1N09UON2kBTtT%2Ft2R92Hmeq%2FO9u3cWyhh5VO1peRlw6LLArx4Pq5LjfLHUS09qGYdYM7m%2BOm3QZu8ju8f59rFPvd6URTBdNw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A37%3A02&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;586261945920&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.20:37:32.512 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.20:37:32.541 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.20:37:35.343 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 166100 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.20:37:35.344 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.20:37:36.149 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.20:37:36.160 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.20:37:36.163 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.20:37:36.163 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.20:37:36.219 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.20:37:36.219 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 845 ms
25-03-14.20:37:36.884 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.20:37:37.112 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.20:37:37.125 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.20:37:37.126 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.20:37:37.166 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#34c53688:0/SimpleConnection@1c011855 [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=59925]
25-03-14.20:37:37.204 [main            ] INFO  Application            - Started Application in 2.261 seconds (process running for 2.667)
25-03-14.20:38:09.429 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.20:38:09.429 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.20:38:09.430 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.20:38:09.505 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.20:38:09.569 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.20:38:09.722 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4e2a2eff
25-03-14.20:38:09.725 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.20:38:19.827 [http-nio-8081-exec-1] ERROR PayPort                - 营销锁单失败 userId: Eason4, orderItemId: 422435644849
java.net.SocketTimeoutException: timeout
	at okio.Okio$4.newTimeoutException(Okio.java:232)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:286)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:118)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:89)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.SocketException: Socket closed
	at java.base/sun.nio.ch.NioSocketImpl.endRead(NioSocketImpl.java:253)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:332)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	... 75 common frames omitted
25-03-14.20:38:19.913 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='422435644849', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=U%2FinIc9IWFwdNefzhYOlGxHXbxF5KxsgJLhCRixlyYV9d5moxwMKW8uYkxyyN%2FxtMlF4RlZz318bXv7yHpgf899UzmgtZKYOIoJX0aaKgNuj2ktWQ2IUagpYkG3MRCtszrodEJSNYW7Ke6wa1DakQMOwDP3R%2B%2FxuoH4QY3ytgvlrVeNbrZp%2FNb%2BDW7Y2D0fE2vtUU5Fo2u1zPGEYu9G%2BljUzboFozhP62r%2BV4GCdZRQkMiJxQAdafV9rHW%2BeZcr2PE8rrCX6L41qhbHw8cm1gc3zf6Z%2F%2BzYVR68YYAAMw3eIXRFBd%2BNFjbNKOLght9SanrmISAlGtu7bZJLeL5Bklg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A38%3A19&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;422435644849&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:38:19.933 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=U%2FinIc9IWFwdNefzhYOlGxHXbxF5KxsgJLhCRixlyYV9d5moxwMKW8uYkxyyN%2FxtMlF4RlZz318bXv7yHpgf899UzmgtZKYOIoJX0aaKgNuj2ktWQ2IUagpYkG3MRCtszrodEJSNYW7Ke6wa1DakQMOwDP3R%2B%2FxuoH4QY3ytgvlrVeNbrZp%2FNb%2BDW7Y2D0fE2vtUU5Fo2u1zPGEYu9G%2BljUzboFozhP62r%2BV4GCdZRQkMiJxQAdafV9rHW%2BeZcr2PE8rrCX6L41qhbHw8cm1gc3zf6Z%2F%2BzYVR68YYAAMw3eIXRFBd%2BNFjbNKOLght9SanrmISAlGtu7bZJLeL5Bklg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A38%3A19&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;422435644849&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:38:19.933 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 422435644849 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=U%2FinIc9IWFwdNefzhYOlGxHXbxF5KxsgJLhCRixlyYV9d5moxwMKW8uYkxyyN%2FxtMlF4RlZz318bXv7yHpgf899UzmgtZKYOIoJX0aaKgNuj2ktWQ2IUagpYkG3MRCtszrodEJSNYW7Ke6wa1DakQMOwDP3R%2B%2FxuoH4QY3ytgvlrVeNbrZp%2FNb%2BDW7Y2D0fE2vtUU5Fo2u1zPGEYu9G%2BljUzboFozhP62r%2BV4GCdZRQkMiJxQAdafV9rHW%2BeZcr2PE8rrCX6L41qhbHw8cm1gc3zf6Z%2F%2BzYVR68YYAAMw3eIXRFBd%2BNFjbNKOLght9SanrmISAlGtu7bZJLeL5Bklg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A38%3A19&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;422435644849&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.20:38:19.933 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.20:39:31.390 [http-nio-8081-exec-3] INFO  PayController          - 正在创建订单...
25-03-14.20:39:39.779 [http-nio-8081-exec-3] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=706848555635, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=803988719891, teamId=92575294, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.20:39:39.789 [http-nio-8081-exec-3] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='706848555635', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=dHxsNhNeLexEboROzPfZm%2FBJ4UZddKQzH0hhpTsgE3GF3rrUjb5lnP3In3YuNfZf4wh3qisGJVJ4Yc4Y1iaYQ7Dwe6beEPJgO3qG7nsCg2x1nvJph5r5l5px5swLG%2FIMB4EVKvNX3DJtkFnRyXCfvNbWrhfGyvCOlifaK09WxoOnb1RKK23mVtKxm8xeH5R%2BI9pcicQxNFeHrF0JbI%2FvT6NBBuWxgayh4%2F5LYNkfGu53K72n302kS01CA8cA3MquZyQ67Ift2XQlVVgo3C893UYx%2FEw92Sl8epd1MUp0JWRctGN1lagNHBSdt2Kc0BE7jGvaPpSvlAuDVncnXQK8Ag%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A39%3A39&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;706848555635&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:39:39.800 [http-nio-8081-exec-3] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=dHxsNhNeLexEboROzPfZm%2FBJ4UZddKQzH0hhpTsgE3GF3rrUjb5lnP3In3YuNfZf4wh3qisGJVJ4Yc4Y1iaYQ7Dwe6beEPJgO3qG7nsCg2x1nvJph5r5l5px5swLG%2FIMB4EVKvNX3DJtkFnRyXCfvNbWrhfGyvCOlifaK09WxoOnb1RKK23mVtKxm8xeH5R%2BI9pcicQxNFeHrF0JbI%2FvT6NBBuWxgayh4%2F5LYNkfGu53K72n302kS01CA8cA3MquZyQ67Ift2XQlVVgo3C893UYx%2FEw92Sl8epd1MUp0JWRctGN1lagNHBSdt2Kc0BE7jGvaPpSvlAuDVncnXQK8Ag%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A39%3A39&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;706848555635&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:39:39.800 [http-nio-8081-exec-3] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 706848555635 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=dHxsNhNeLexEboROzPfZm%2FBJ4UZddKQzH0hhpTsgE3GF3rrUjb5lnP3In3YuNfZf4wh3qisGJVJ4Yc4Y1iaYQ7Dwe6beEPJgO3qG7nsCg2x1nvJph5r5l5px5swLG%2FIMB4EVKvNX3DJtkFnRyXCfvNbWrhfGyvCOlifaK09WxoOnb1RKK23mVtKxm8xeH5R%2BI9pcicQxNFeHrF0JbI%2FvT6NBBuWxgayh4%2F5LYNkfGu53K72n302kS01CA8cA3MquZyQ67Ift2XQlVVgo3C893UYx%2FEw92Sl8epd1MUp0JWRctGN1lagNHBSdt2Kc0BE7jGvaPpSvlAuDVncnXQK8Ag%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A39%3A39&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;706848555635&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;《手写MyBatis：渐进式源码实践》&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.20:39:39.801 [http-nio-8081-exec-3] INFO  PayController          - 创建订单成功!
25-03-14.20:43:01.011 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.20:43:01.380 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.20:43:01.380 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.20:43:01.453 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.20:43:01.459 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-03-14.20:43:01.464 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-03-14.20:43:04.492 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 125816 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.20:43:04.493 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.20:43:05.244 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.20:43:05.253 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.20:43:05.254 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.20:43:05.254 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.20:43:05.308 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.20:43:05.308 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 788 ms
25-03-14.20:43:05.919 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.20:43:06.136 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.20:43:06.149 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.20:43:06.151 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.20:43:06.187 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#34c53688:0/SimpleConnection@1c011855 [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=59197]
25-03-14.20:43:06.227 [main            ] INFO  Application            - Started Application in 2.104 seconds (process running for 2.486)
25-03-14.20:43:12.972 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.20:43:12.972 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.20:43:12.972 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-03-14.20:43:13.030 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.20:43:13.081 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.20:43:13.214 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@31caa0c8
25-03-14.20:43:13.216 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.20:43:23.291 [http-nio-8081-exec-1] ERROR PayPort                - 营销锁单失败 userId: Eason4, orderItemId: 360961904844
java.net.SocketTimeoutException: timeout
	at okio.Okio$4.newTimeoutException(Okio.java:232)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:286)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:118)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:89)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.SocketException: Socket closed
	at java.base/sun.nio.ch.NioSocketImpl.endRead(NioSocketImpl.java:253)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:332)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	... 75 common frames omitted
25-03-14.20:43:23.379 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='360961904844', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Yw0YOu6d2dRHRevIMvFD6XMGwYzEx%2B14ngfp3jbV4fKqNm6PSOkc8nYNFFSaODlmJOl3ZHaXoDxCapVfru9DXxNBapdyN9Nf3Cpkp1WzYrM5yiJUveI7tkYq174T637JgXPCMaMqvw033zmwRdJLmAytYB7zciXfF9aOAZqOu8Asf4mkE2ZvSjzGHrbfqyRMqSUiT9ACcas0Tgf0LAJWMApA2E4y4b6HkXGnoEgprm2dt3uRbVHpuzMsEV3ocxxSvwAQ%2F7AdFpmLaIvHcCort5Jt01x9vHqBpfcB2TAsOKBHeLHY2UQUw65MN4vKgQBjjvKDMLkY41IsuRijphkykQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A43%3A23&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;360961904844&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:43:23.393 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Yw0YOu6d2dRHRevIMvFD6XMGwYzEx%2B14ngfp3jbV4fKqNm6PSOkc8nYNFFSaODlmJOl3ZHaXoDxCapVfru9DXxNBapdyN9Nf3Cpkp1WzYrM5yiJUveI7tkYq174T637JgXPCMaMqvw033zmwRdJLmAytYB7zciXfF9aOAZqOu8Asf4mkE2ZvSjzGHrbfqyRMqSUiT9ACcas0Tgf0LAJWMApA2E4y4b6HkXGnoEgprm2dt3uRbVHpuzMsEV3ocxxSvwAQ%2F7AdFpmLaIvHcCort5Jt01x9vHqBpfcB2TAsOKBHeLHY2UQUw65MN4vKgQBjjvKDMLkY41IsuRijphkykQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A43%3A23&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;360961904844&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:43:23.394 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 360961904844 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Yw0YOu6d2dRHRevIMvFD6XMGwYzEx%2B14ngfp3jbV4fKqNm6PSOkc8nYNFFSaODlmJOl3ZHaXoDxCapVfru9DXxNBapdyN9Nf3Cpkp1WzYrM5yiJUveI7tkYq174T637JgXPCMaMqvw033zmwRdJLmAytYB7zciXfF9aOAZqOu8Asf4mkE2ZvSjzGHrbfqyRMqSUiT9ACcas0Tgf0LAJWMApA2E4y4b6HkXGnoEgprm2dt3uRbVHpuzMsEV3ocxxSvwAQ%2F7AdFpmLaIvHcCort5Jt01x9vHqBpfcB2TAsOKBHeLHY2UQUw65MN4vKgQBjjvKDMLkY41IsuRijphkykQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A43%3A23&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;360961904844&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.20:43:23.394 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.20:43:54.098 [http-nio-8081-exec-3] INFO  PayController          - 正在创建订单...
25-03-14.20:44:04.119 [http-nio-8081-exec-3] ERROR PayPort                - 营销锁单失败 userId: Eason4, orderItemId: 235627973750
java.net.SocketTimeoutException: timeout
	at okio.Okio$4.newTimeoutException(Okio.java:232)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:286)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:118)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:89)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.SocketException: Socket closed
	at java.base/sun.nio.ch.NioSocketImpl.endRead(NioSocketImpl.java:253)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:332)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	... 75 common frames omitted
25-03-14.20:44:04.128 [http-nio-8081-exec-3] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='235627973750', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=DdMafGgRpE9w1Eq6CGmDCJ7xESr0RoIS4tonhESz7KWTUZB4HU4yKO0uhMaA0HRRJLTqI9T6i%2Ff2XncpNYAs8t%2BNUYphSTXBaJ8DJc7Mq5UwtjPtT%2Fc0%2F2n6g8SmUuGPW8C88XofpDgjCid4lbERiFenPTq3UC5MZr5YHNr4xExuqnMaeNiwDOjsOEPTdExJtRVxucSva8Cn%2BNba5RZmuUEFnqos0dJ8rHylbG3e07Bu7wXvAFLXZVgRmP0genMQU81LaefWgSu14bUHGAXRaqwP%2FG2XdcmkJGDpVmXtCaOIczi4aBLTwKXYtQk1%2Fts8wpACjmZApmiN6NUufyZfWQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A44%3A04&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;235627973750&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:44:04.133 [http-nio-8081-exec-3] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=DdMafGgRpE9w1Eq6CGmDCJ7xESr0RoIS4tonhESz7KWTUZB4HU4yKO0uhMaA0HRRJLTqI9T6i%2Ff2XncpNYAs8t%2BNUYphSTXBaJ8DJc7Mq5UwtjPtT%2Fc0%2F2n6g8SmUuGPW8C88XofpDgjCid4lbERiFenPTq3UC5MZr5YHNr4xExuqnMaeNiwDOjsOEPTdExJtRVxucSva8Cn%2BNba5RZmuUEFnqos0dJ8rHylbG3e07Bu7wXvAFLXZVgRmP0genMQU81LaefWgSu14bUHGAXRaqwP%2FG2XdcmkJGDpVmXtCaOIczi4aBLTwKXYtQk1%2Fts8wpACjmZApmiN6NUufyZfWQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A44%3A04&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;235627973750&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:44:04.133 [http-nio-8081-exec-3] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 235627973750 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=DdMafGgRpE9w1Eq6CGmDCJ7xESr0RoIS4tonhESz7KWTUZB4HU4yKO0uhMaA0HRRJLTqI9T6i%2Ff2XncpNYAs8t%2BNUYphSTXBaJ8DJc7Mq5UwtjPtT%2Fc0%2F2n6g8SmUuGPW8C88XofpDgjCid4lbERiFenPTq3UC5MZr5YHNr4xExuqnMaeNiwDOjsOEPTdExJtRVxucSva8Cn%2BNba5RZmuUEFnqos0dJ8rHylbG3e07Bu7wXvAFLXZVgRmP0genMQU81LaefWgSu14bUHGAXRaqwP%2FG2XdcmkJGDpVmXtCaOIczi4aBLTwKXYtQk1%2Fts8wpACjmZApmiN6NUufyZfWQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A44%3A04&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;235627973750&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.20:44:04.133 [http-nio-8081-exec-3] INFO  PayController          - 创建订单成功!
25-03-14.20:44:43.540 [http-nio-8081-exec-5] INFO  PayController          - 正在创建订单...
25-03-14.20:44:43.805 [http-nio-8081-exec-5] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=262809640455, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=158948438175, teamId=42762512, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.20:44:43.817 [http-nio-8081-exec-5] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='262809640455', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Z5thT2eVTLvX2jZE4PvOKkIzQRjXNwaBmdkY6Vfdek0rDUVq%2Bi1XQ%2BlYSEQTtlRdBr8hwBzrxEUmiHCRbMYzUu1uaB1XT7d%2Fb8iEVFDUnKB9O0j%2BAAF4rjWpofWTOLAxn1t4n%2FOrWd77GoQzwopR2SfjLeDAHBt0feTcN4NjaYp3yqElM8X66aUKp%2Fu6r2eW2BayWsaSORBDbESZiBb0a16Rj8fD%2FYb26v5MPN%2BTOTymMyfJM1Y6JMVk9DFcf99RlopzeOMO%2BK5VKHaInClFs0kL0B9P%2F%2Fp2PceDLPYVOcHVY48DeZFhykgMvBPXc%2BtMUvh7OiHEMHzr1ET%2FXhnZdA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A44%3A43&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;262809640455&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:44:43.827 [http-nio-8081-exec-5] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Z5thT2eVTLvX2jZE4PvOKkIzQRjXNwaBmdkY6Vfdek0rDUVq%2Bi1XQ%2BlYSEQTtlRdBr8hwBzrxEUmiHCRbMYzUu1uaB1XT7d%2Fb8iEVFDUnKB9O0j%2BAAF4rjWpofWTOLAxn1t4n%2FOrWd77GoQzwopR2SfjLeDAHBt0feTcN4NjaYp3yqElM8X66aUKp%2Fu6r2eW2BayWsaSORBDbESZiBb0a16Rj8fD%2FYb26v5MPN%2BTOTymMyfJM1Y6JMVk9DFcf99RlopzeOMO%2BK5VKHaInClFs0kL0B9P%2F%2Fp2PceDLPYVOcHVY48DeZFhykgMvBPXc%2BtMUvh7OiHEMHzr1ET%2FXhnZdA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A44%3A43&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;262809640455&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:44:43.827 [http-nio-8081-exec-5] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 262809640455 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Z5thT2eVTLvX2jZE4PvOKkIzQRjXNwaBmdkY6Vfdek0rDUVq%2Bi1XQ%2BlYSEQTtlRdBr8hwBzrxEUmiHCRbMYzUu1uaB1XT7d%2Fb8iEVFDUnKB9O0j%2BAAF4rjWpofWTOLAxn1t4n%2FOrWd77GoQzwopR2SfjLeDAHBt0feTcN4NjaYp3yqElM8X66aUKp%2Fu6r2eW2BayWsaSORBDbESZiBb0a16Rj8fD%2FYb26v5MPN%2BTOTymMyfJM1Y6JMVk9DFcf99RlopzeOMO%2BK5VKHaInClFs0kL0B9P%2F%2Fp2PceDLPYVOcHVY48DeZFhykgMvBPXc%2BtMUvh7OiHEMHzr1ET%2FXhnZdA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A44%3A43&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;262809640455&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.20:44:43.827 [http-nio-8081-exec-5] INFO  PayController          - 创建订单成功!
25-03-14.20:45:24.984 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.20:45:24.985 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.20:45:24.985 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.20:45:24.985 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505859113
25-03-14.20:45:24.985 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，商户订单号: 262809640455
25-03-14.20:45:24.985 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.20:45:24.985 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.20:45:24.986 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 20:45:21
25-03-14.20:45:24.986 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.20:45:24.986 [http-nio-8081-exec-7] INFO  PayController          - 支付回调，支付回调，更新订单 262809640455
25-03-14.20:45:24.998 [http-nio-8081-exec-7] ERROR PayController          - 支付宝回调处理失败! 错误信息: 

java.lang.IllegalArgumentException: Unable to convert SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=262809640455, payTime=2025-03-14T20:45:24.986430700) to RequestBody (parameter #1)
    for method IGroupBuyMarketService.settlementMarketPayOrder
	at retrofit2.Utils.methodError(Utils.java:54)
	at retrofit2.Utils.parameterError(Utils.java:60)
	at retrofit2.ParameterHandler$Body.apply(ParameterHandler.java:431)
	at retrofit2.RequestFactory.create(RequestFactory.java:129)
	at retrofit2.OkHttpCall.createRawCall(OkHttpCall.java:208)
	at retrofit2.OkHttpCall.getRawCall(OkHttpCall.java:107)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:197)
	at xin.eason.infrastructure.adapter.port.PayPort.settlementMarketOrder(PayPort.java:155)
	at xin.eason.domain.order.service.AbstractOrderService.orderPaySuccess(AbstractOrderService.java:118)
	at xin.eason.trigger.http.PayController.alipayNotify(PayController.java:106)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.LocalDateTime` not supported by default: add Module "com.fasterxml.jackson.datatype:jackson-datatype-jsr310" to enable handling (through reference chain: xin.eason.infrastructure.gateway.dto.SettlementOrderRequestDTO["payTime"])
	at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)
	at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1328)
	at com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35)
	at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:732)
	at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:770)
	at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:184)
	at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:502)
	at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:422)
	at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1579)
	at com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1285)
	at com.fasterxml.jackson.databind.ObjectWriter.writeValueAsBytes(ObjectWriter.java:1165)
	at retrofit2.converter.jackson.JacksonRequestBodyConverter.convert(JacksonRequestBodyConverter.java:35)
	at retrofit2.converter.jackson.JacksonRequestBodyConverter.convert(JacksonRequestBodyConverter.java:24)
	at retrofit2.ParameterHandler$Body.apply(ParameterHandler.java:429)
	... 57 common frames omitted
25-03-14.20:52:00.983 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.20:52:00.998 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.20:52:00.998 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.20:52:01.080 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.20:52:01.086 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-03-14.20:52:01.098 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-03-14.20:52:04.679 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 150100 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.20:52:04.680 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.20:52:05.513 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.20:52:05.528 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.20:52:05.529 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.20:52:05.529 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.20:52:05.587 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.20:52:05.588 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 881 ms
25-03-14.20:52:06.270 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.20:52:06.493 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.20:52:06.505 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.20:52:06.507 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.20:52:06.540 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#44b940a2:0/SimpleConnection@238ad211 [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=60663]
25-03-14.20:52:06.577 [main            ] INFO  Application            - Started Application in 2.317 seconds (process running for 2.76)
25-03-14.20:52:31.898 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.20:52:31.899 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.20:52:31.900 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.20:52:31.972 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.20:52:32.039 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.20:52:32.213 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7a038821
25-03-14.20:52:32.214 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.20:52:32.379 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='015318571999', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=LZ65MgZul8eFF1odXaI34tonYVVLTIFI%2F4wQQvZNEQj3RSCWkaYrl0s8oZcVfq1IGAcRAqK2KQcl6KS4J%2Bzj3bGr4G2ARM3452XXo9ODwU1xpVU8RCCimI6SapgVZ1O%2BYHNYAuFNDcwCFz41xzHZEIrOI5GEAYdEoexZlvefeEEhfMlqNOaXhrTTgUsL5QkGGDFSvz06StRayqR4kNLax6R2ntiHjVamWjlIGrZRGYlJbq81xOghYzSR%2Bsyi6viIIVsWAtMPms2f%2FOe9sA%2BFceFpFf2T7pUAOSijxfY32hwyETjLNeqGmMSmOyLNETHtDNXiSeFJo1NeGkOuziDBww%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A52%3A32&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;015318571999&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:52:32.400 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=LZ65MgZul8eFF1odXaI34tonYVVLTIFI%2F4wQQvZNEQj3RSCWkaYrl0s8oZcVfq1IGAcRAqK2KQcl6KS4J%2Bzj3bGr4G2ARM3452XXo9ODwU1xpVU8RCCimI6SapgVZ1O%2BYHNYAuFNDcwCFz41xzHZEIrOI5GEAYdEoexZlvefeEEhfMlqNOaXhrTTgUsL5QkGGDFSvz06StRayqR4kNLax6R2ntiHjVamWjlIGrZRGYlJbq81xOghYzSR%2Bsyi6viIIVsWAtMPms2f%2FOe9sA%2BFceFpFf2T7pUAOSijxfY32hwyETjLNeqGmMSmOyLNETHtDNXiSeFJo1NeGkOuziDBww%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A52%3A32&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;015318571999&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:52:32.400 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId:  orderId: 015318571999 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=LZ65MgZul8eFF1odXaI34tonYVVLTIFI%2F4wQQvZNEQj3RSCWkaYrl0s8oZcVfq1IGAcRAqK2KQcl6KS4J%2Bzj3bGr4G2ARM3452XXo9ODwU1xpVU8RCCimI6SapgVZ1O%2BYHNYAuFNDcwCFz41xzHZEIrOI5GEAYdEoexZlvefeEEhfMlqNOaXhrTTgUsL5QkGGDFSvz06StRayqR4kNLax6R2ntiHjVamWjlIGrZRGYlJbq81xOghYzSR%2Bsyi6viIIVsWAtMPms2f%2FOe9sA%2BFceFpFf2T7pUAOSijxfY32hwyETjLNeqGmMSmOyLNETHtDNXiSeFJo1NeGkOuziDBww%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A52%3A32&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;015318571999&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.20:52:32.400 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.20:53:36.183 [http-nio-8081-exec-3] INFO  PayController          - 正在创建订单...
25-03-14.20:53:45.615 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.20:53:48.335 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 41300 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.20:53:48.336 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.20:53:49.149 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.20:53:49.162 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.20:53:49.163 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.20:53:49.163 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.20:53:49.225 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.20:53:49.225 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 861 ms
25-03-14.20:53:49.863 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.20:53:50.100 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.20:53:50.113 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.20:53:50.115 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.20:53:50.159 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#27a6fef2:0/SimpleConnection@23ec2bdc [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=60809]
25-03-14.20:53:50.203 [main            ] INFO  Application            - Started Application in 2.263 seconds (process running for 2.704)
25-03-14.20:54:07.365 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.20:54:07.365 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.20:54:07.366 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.20:54:07.440 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.20:54:07.505 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.20:54:07.664 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27b28b77
25-03-14.20:54:07.666 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.20:54:07.762 [http-nio-8081-exec-1] ERROR PayPort                - 营销锁单失败 userId: Eason4, orderItemId: 301108358224
java.net.ConnectException: Failed to connect to /127.0.0.1:8080
	at okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.java:265)
	at okhttp3.internal.connection.RealConnection.connect(RealConnection.java:183)
	at okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.java:224)
	at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.java:108)
	at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.java:88)
	at okhttp3.internal.connection.Transmitter.newExchange(Transmitter.java:169)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:41)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:118)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:89)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.ConnectException: Connection refused: no further information
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at okhttp3.internal.platform.Platform.connectSocket(Platform.java:130)
	at okhttp3.internal.connection.RealConnection.connectSocket(RealConnection.java:263)
	... 73 common frames omitted
25-03-14.20:54:07.873 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='301108358224', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=E1j6x%2BGaBqf%2FVT%2Fyv4KnDMkU5H%2F%2BEXppxnVmpfJ5W3ksZh5D2KuaTHjsQoTGHZSIZvWN1D92gKHHBg3XMpFwsvYecr58Nw3I6TsG4P0OGF%2F9H3A2SQ%2Fzi1XQhwBb2eZYe4h0G%2BFkpqtKrSjVJJLJhna4e1zfrn3bN8THcC9Wq7ZsCOKf%2F3XVLvj6KUG%2B%2FO2Wbrvahe%2BidvCL9CVBMz6cr%2BjnwguJZW%2BdPxy0%2FCieuUpLQC2LpmcDO%2BdnBDZyM%2BewM58QlQeD24RwpualbJwStgXmt0mhCvxhC7OYE9uB20ANKKzYSk9fAAIuGTRdQj36hCmJPvCf3CGr%2FF1GqYlX8g%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A54%3A07&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;301108358224&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:54:07.889 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=E1j6x%2BGaBqf%2FVT%2Fyv4KnDMkU5H%2F%2BEXppxnVmpfJ5W3ksZh5D2KuaTHjsQoTGHZSIZvWN1D92gKHHBg3XMpFwsvYecr58Nw3I6TsG4P0OGF%2F9H3A2SQ%2Fzi1XQhwBb2eZYe4h0G%2BFkpqtKrSjVJJLJhna4e1zfrn3bN8THcC9Wq7ZsCOKf%2F3XVLvj6KUG%2B%2FO2Wbrvahe%2BidvCL9CVBMz6cr%2BjnwguJZW%2BdPxy0%2FCieuUpLQC2LpmcDO%2BdnBDZyM%2BewM58QlQeD24RwpualbJwStgXmt0mhCvxhC7OYE9uB20ANKKzYSk9fAAIuGTRdQj36hCmJPvCf3CGr%2FF1GqYlX8g%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A54%3A07&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;301108358224&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:54:07.889 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 301108358224 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=E1j6x%2BGaBqf%2FVT%2Fyv4KnDMkU5H%2F%2BEXppxnVmpfJ5W3ksZh5D2KuaTHjsQoTGHZSIZvWN1D92gKHHBg3XMpFwsvYecr58Nw3I6TsG4P0OGF%2F9H3A2SQ%2Fzi1XQhwBb2eZYe4h0G%2BFkpqtKrSjVJJLJhna4e1zfrn3bN8THcC9Wq7ZsCOKf%2F3XVLvj6KUG%2B%2FO2Wbrvahe%2BidvCL9CVBMz6cr%2BjnwguJZW%2BdPxy0%2FCieuUpLQC2LpmcDO%2BdnBDZyM%2BewM58QlQeD24RwpualbJwStgXmt0mhCvxhC7OYE9uB20ANKKzYSk9fAAIuGTRdQj36hCmJPvCf3CGr%2FF1GqYlX8g%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A54%3A07&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;301108358224&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.20:54:07.889 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.20:54:34.468 [http-nio-8081-exec-3] INFO  PayController          - 正在创建订单...
25-03-14.20:54:34.806 [http-nio-8081-exec-3] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=156920407368, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=179871008222, teamId=88782973, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.20:54:34.819 [http-nio-8081-exec-3] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='156920407368', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=YmnCHmWjhQUCJv0IneJujx8CIRynz%2BIDmutc5YjFURWnHVNDB%2BGADjxwQC9g3N0CHJFZmXw3QeGTtgt%2B3E9tPrahzJikj85q0UMVcYfo%2FRf31HQvFsVaBuGkLlv87qXwp1ytsrrI%2BJcI0s745StfNIwxN5H2xagELyBsuWuir6ctvaFKVyV8ZhjOclNgbP6IaqPtDhaY4RPMOjc6kf1GMRn%2FFSGItVhGFw8HNUI8NuO3it6Pj1xG%2B9qc%2FjgeCUpMrKb6qKyVhMVoQfkzBPR7X8Jri6iD%2Ba3aMonDHoRF0XgoK3JhwWOj2FVbmVRmhOTTm%2BdKYazM2t9UW2YjVVHnLg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A54%3A34&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;156920407368&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:54:34.832 [http-nio-8081-exec-3] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=YmnCHmWjhQUCJv0IneJujx8CIRynz%2BIDmutc5YjFURWnHVNDB%2BGADjxwQC9g3N0CHJFZmXw3QeGTtgt%2B3E9tPrahzJikj85q0UMVcYfo%2FRf31HQvFsVaBuGkLlv87qXwp1ytsrrI%2BJcI0s745StfNIwxN5H2xagELyBsuWuir6ctvaFKVyV8ZhjOclNgbP6IaqPtDhaY4RPMOjc6kf1GMRn%2FFSGItVhGFw8HNUI8NuO3it6Pj1xG%2B9qc%2FjgeCUpMrKb6qKyVhMVoQfkzBPR7X8Jri6iD%2Ba3aMonDHoRF0XgoK3JhwWOj2FVbmVRmhOTTm%2BdKYazM2t9UW2YjVVHnLg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A54%3A34&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;156920407368&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:54:34.833 [http-nio-8081-exec-3] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 156920407368 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=YmnCHmWjhQUCJv0IneJujx8CIRynz%2BIDmutc5YjFURWnHVNDB%2BGADjxwQC9g3N0CHJFZmXw3QeGTtgt%2B3E9tPrahzJikj85q0UMVcYfo%2FRf31HQvFsVaBuGkLlv87qXwp1ytsrrI%2BJcI0s745StfNIwxN5H2xagELyBsuWuir6ctvaFKVyV8ZhjOclNgbP6IaqPtDhaY4RPMOjc6kf1GMRn%2FFSGItVhGFw8HNUI8NuO3it6Pj1xG%2B9qc%2FjgeCUpMrKb6qKyVhMVoQfkzBPR7X8Jri6iD%2Ba3aMonDHoRF0XgoK3JhwWOj2FVbmVRmhOTTm%2BdKYazM2t9UW2YjVVHnLg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A54%3A34&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;156920407368&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.20:54:34.833 [http-nio-8081-exec-3] INFO  PayController          - 创建订单成功!
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505857526
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，商户订单号: 156920407368
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 20:55:21
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.20:55:25.449 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，支付回调，更新订单 156920407368
25-03-14.20:55:25.462 [http-nio-8081-exec-8] ERROR PayController          - 支付宝回调处理失败! 错误信息: 

java.lang.IllegalArgumentException: Unable to convert SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=156920407368, payTime=2025-03-14T20:55:25.449916700) to RequestBody (parameter #1)
    for method IGroupBuyMarketService.settlementMarketPayOrder
	at retrofit2.Utils.methodError(Utils.java:54)
	at retrofit2.Utils.parameterError(Utils.java:60)
	at retrofit2.ParameterHandler$Body.apply(ParameterHandler.java:431)
	at retrofit2.RequestFactory.create(RequestFactory.java:129)
	at retrofit2.OkHttpCall.createRawCall(OkHttpCall.java:208)
	at retrofit2.OkHttpCall.getRawCall(OkHttpCall.java:107)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:197)
	at xin.eason.infrastructure.adapter.port.PayPort.settlementMarketOrder(PayPort.java:155)
	at xin.eason.domain.order.service.AbstractOrderService.orderPaySuccess(AbstractOrderService.java:118)
	at xin.eason.trigger.http.PayController.alipayNotify(PayController.java:106)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.LocalDateTime` not supported by default: add Module "com.fasterxml.jackson.datatype:jackson-datatype-jsr310" to enable handling (through reference chain: xin.eason.infrastructure.gateway.dto.SettlementOrderRequestDTO["payTime"])
	at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)
	at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1328)
	at com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35)
	at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:732)
	at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:770)
	at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:184)
	at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:502)
	at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:422)
	at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1579)
	at com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1285)
	at com.fasterxml.jackson.databind.ObjectWriter.writeValueAsBytes(ObjectWriter.java:1165)
	at retrofit2.converter.jackson.JacksonRequestBodyConverter.convert(JacksonRequestBodyConverter.java:35)
	at retrofit2.converter.jackson.JacksonRequestBodyConverter.convert(JacksonRequestBodyConverter.java:24)
	at retrofit2.ParameterHandler$Body.apply(ParameterHandler.java:429)
	... 57 common frames omitted
25-03-14.20:56:48.247 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.20:56:48.356 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.20:56:48.357 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.20:56:48.429 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.20:56:48.434 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-03-14.20:56:48.442 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-03-14.20:56:51.741 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 50856 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.20:56:51.742 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.20:56:52.555 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.20:56:52.565 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.20:56:52.566 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.20:56:52.567 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.20:56:52.626 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.20:56:52.627 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 857 ms
25-03-14.20:56:53.260 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.20:56:53.503 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.20:56:53.518 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.20:56:53.520 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.20:56:53.555 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#11f23203:0/SimpleConnection@37d3aa8c [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=64365]
25-03-14.20:56:53.594 [main            ] INFO  Application            - Started Application in 2.263 seconds (process running for 2.687)
25-03-14.20:57:06.365 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.20:57:06.365 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.20:57:06.366 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.20:57:06.435 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.20:57:06.496 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.20:57:06.641 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@194b98e3
25-03-14.20:57:06.643 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.20:57:06.798 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=396366132441, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=011347125244, teamId=32139954, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.20:57:06.907 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='396366132441', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=QnarN%2Bupy5eH%2Feg9YIWqnSC5y4BHpmqCP0hCgCIj1t8VnY1jJdAYeipOfWcI%2BUcavZwDMlQiqohSMGgEDresjTlAJrq%2Fa0npElbE%2Bj9NuWMjAACNZiYpv6Ega64U0gih8jnukPW75upOaT18YCgi4ypAkjE8H9b2s%2FM%2FzB0wlg8jls4ON7yxdYGGxPEADTLROQsZbIYDUfuCWkRgoHKAQBgRCbKyaCoqbsDrM12TCpN0hQVMCTV9dNc6k8sPbWYM4HGorq7YOwQ5FuUQJXBoFaywRr1Yx%2B20%2FRlMc%2BY%2FXwLwyCGZo73g9odpajcWyCVz2N6BRpYmRLTXVfjrJV4PhA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A57%3A06&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;396366132441&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:57:06.919 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=QnarN%2Bupy5eH%2Feg9YIWqnSC5y4BHpmqCP0hCgCIj1t8VnY1jJdAYeipOfWcI%2BUcavZwDMlQiqohSMGgEDresjTlAJrq%2Fa0npElbE%2Bj9NuWMjAACNZiYpv6Ega64U0gih8jnukPW75upOaT18YCgi4ypAkjE8H9b2s%2FM%2FzB0wlg8jls4ON7yxdYGGxPEADTLROQsZbIYDUfuCWkRgoHKAQBgRCbKyaCoqbsDrM12TCpN0hQVMCTV9dNc6k8sPbWYM4HGorq7YOwQ5FuUQJXBoFaywRr1Yx%2B20%2FRlMc%2BY%2FXwLwyCGZo73g9odpajcWyCVz2N6BRpYmRLTXVfjrJV4PhA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A57%3A06&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;396366132441&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:57:06.920 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 396366132441 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=QnarN%2Bupy5eH%2Feg9YIWqnSC5y4BHpmqCP0hCgCIj1t8VnY1jJdAYeipOfWcI%2BUcavZwDMlQiqohSMGgEDresjTlAJrq%2Fa0npElbE%2Bj9NuWMjAACNZiYpv6Ega64U0gih8jnukPW75upOaT18YCgi4ypAkjE8H9b2s%2FM%2FzB0wlg8jls4ON7yxdYGGxPEADTLROQsZbIYDUfuCWkRgoHKAQBgRCbKyaCoqbsDrM12TCpN0hQVMCTV9dNc6k8sPbWYM4HGorq7YOwQ5FuUQJXBoFaywRr1Yx%2B20%2FRlMc%2BY%2FXwLwyCGZo73g9odpajcWyCVz2N6BRpYmRLTXVfjrJV4PhA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A57%3A06&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;396366132441&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.20:57:06.920 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.20:57:12.111 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.20:57:37.947 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 127128 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.20:57:37.948 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.20:57:38.725 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.20:57:38.735 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.20:57:38.736 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.20:57:38.736 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.20:57:38.790 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.20:57:38.791 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 816 ms
25-03-14.20:57:39.429 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.20:57:39.659 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.20:57:39.671 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.20:57:39.672 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.20:57:39.707 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6ffd4c0d:0/SimpleConnection@6591f8ea [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=64447]
25-03-14.20:57:39.749 [main            ] INFO  Application            - Started Application in 2.203 seconds (process running for 2.606)
25-03-14.20:57:42.340 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.20:57:42.341 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.20:57:42.341 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-03-14.20:57:42.405 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.20:57:42.458 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.20:57:42.596 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@31caa0c8
25-03-14.20:57:42.599 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.20:57:42.949 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=411702429590, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=832506878913, teamId=31138160, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.20:57:43.043 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='411702429590', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=eLgjIH1bvC%2B%2FxrwJRZd5TsEn%2FbLzjWSCYfefQvGf996x%2FoI1T%2BwS8vR2PBpX7oJ2ySiQWYpZdRuUfiPWq%2BJ%2BGfFEWyszMpqRdqtRwqGCpzNTjRryYsiZryOYyKBZT5wNA4thIyb4YNDANsbcUiRBfpVcS59SsqrZiyDe7%2FDTfGxJO6VQqsM5Y%2Byp%2Fia3FS3VfbTLrhfzthgjhjqGJSmx%2F7xINZI7RHYFaLFHY40QMV03pFo05vt%2Bq2%2FxAtgddJDgF547LUTaLWHbblYSQlTHVIFjLCGwGO0CjOMBpq9vl4ugb0tYA4DlJ2Y%2Bgs4gaGAGWZBiptertenOB3%2F0rulrhw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A57%3A43&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;411702429590&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.20:57:43.056 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=eLgjIH1bvC%2B%2FxrwJRZd5TsEn%2FbLzjWSCYfefQvGf996x%2FoI1T%2BwS8vR2PBpX7oJ2ySiQWYpZdRuUfiPWq%2BJ%2BGfFEWyszMpqRdqtRwqGCpzNTjRryYsiZryOYyKBZT5wNA4thIyb4YNDANsbcUiRBfpVcS59SsqrZiyDe7%2FDTfGxJO6VQqsM5Y%2Byp%2Fia3FS3VfbTLrhfzthgjhjqGJSmx%2F7xINZI7RHYFaLFHY40QMV03pFo05vt%2Bq2%2FxAtgddJDgF547LUTaLWHbblYSQlTHVIFjLCGwGO0CjOMBpq9vl4ugb0tYA4DlJ2Y%2Bgs4gaGAGWZBiptertenOB3%2F0rulrhw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A57%3A43&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;411702429590&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.20:57:43.056 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 411702429590 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=eLgjIH1bvC%2B%2FxrwJRZd5TsEn%2FbLzjWSCYfefQvGf996x%2FoI1T%2BwS8vR2PBpX7oJ2ySiQWYpZdRuUfiPWq%2BJ%2BGfFEWyszMpqRdqtRwqGCpzNTjRryYsiZryOYyKBZT5wNA4thIyb4YNDANsbcUiRBfpVcS59SsqrZiyDe7%2FDTfGxJO6VQqsM5Y%2Byp%2Fia3FS3VfbTLrhfzthgjhjqGJSmx%2F7xINZI7RHYFaLFHY40QMV03pFo05vt%2Bq2%2FxAtgddJDgF547LUTaLWHbblYSQlTHVIFjLCGwGO0CjOMBpq9vl4ugb0tYA4DlJ2Y%2Bgs4gaGAGWZBiptertenOB3%2F0rulrhw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+20%3A57%3A43&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;411702429590&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.20:57:43.057 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505859114
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，商户订单号: 411702429590
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 20:58:10
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.20:58:14.552 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付回调，更新订单 411702429590
25-03-14.20:58:14.648 [http-nio-8081-exec-3] INFO  PayPort                - 拼团订单结算, userId: Eason4, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=411702429590, payTime=2025-03-14T20:58:14.552059), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=411702429590, teamId=31138160, activityId=100123))
25-03-14.21:02:09.097 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.21:02:09.374 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.21:02:09.374 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.21:02:09.458 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.21:02:09.463 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-03-14.21:02:09.473 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-03-14.21:02:12.751 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 25340 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.21:02:12.752 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.21:02:13.555 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.21:02:13.564 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.21:02:13.565 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.21:02:13.565 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.21:02:13.623 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.21:02:13.623 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 843 ms
25-03-14.21:02:14.285 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.21:02:14.514 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.21:02:14.525 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.21:02:14.527 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.21:02:14.570 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6ffd4c0d:0/SimpleConnection@6591f8ea [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=51801]
25-03-14.21:02:14.621 [main            ] INFO  Application            - Started Application in 2.276 seconds (process running for 2.7)
25-03-14.21:02:30.239 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.21:02:30.239 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.21:02:30.240 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.21:02:30.300 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.21:02:30.354 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.21:02:30.489 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6753631a
25-03-14.21:02:30.490 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.21:02:30.833 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=092244780398, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=188619049506, teamId=93492500, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.21:02:30.931 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='092244780398', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=GSTcnxcytTpGIASHhTNs%2BnZd3ikJYDVIRIvlCWVe%2FettkVl%2BUNgGXASynUH%2Bs%2BDA1dm7R8a72pqxjYlxYqX84N5U1q7X%2FGCsZEFdOcENeh2ofw%2FbDylh7UjSl3eGB50qp7OsFMAv%2FuV30j6UG143y2yzwrJA6cDqr1t5ErSrcvGZ0HuVZhW9XanobPL7I6o3MKeuJlGgU%2FQ69A5JDHOgwQHKaMGcr%2F61QsalAMaAgg1vvbcPx8QS7xEEz%2FCYqiDEzstnvmGPJWZPrE%2Bo3gfcxcTyboM38Ze014y5aJMdhyAIyBY4nHgcfDIPt8nzy7ulZnuyNvFppc9eWIqHHrwfug%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A02%3A30&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;092244780398&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.21:02:30.949 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=GSTcnxcytTpGIASHhTNs%2BnZd3ikJYDVIRIvlCWVe%2FettkVl%2BUNgGXASynUH%2Bs%2BDA1dm7R8a72pqxjYlxYqX84N5U1q7X%2FGCsZEFdOcENeh2ofw%2FbDylh7UjSl3eGB50qp7OsFMAv%2FuV30j6UG143y2yzwrJA6cDqr1t5ErSrcvGZ0HuVZhW9XanobPL7I6o3MKeuJlGgU%2FQ69A5JDHOgwQHKaMGcr%2F61QsalAMaAgg1vvbcPx8QS7xEEz%2FCYqiDEzstnvmGPJWZPrE%2Bo3gfcxcTyboM38Ze014y5aJMdhyAIyBY4nHgcfDIPt8nzy7ulZnuyNvFppc9eWIqHHrwfug%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A02%3A30&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;092244780398&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.21:02:30.949 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 092244780398 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=GSTcnxcytTpGIASHhTNs%2BnZd3ikJYDVIRIvlCWVe%2FettkVl%2BUNgGXASynUH%2Bs%2BDA1dm7R8a72pqxjYlxYqX84N5U1q7X%2FGCsZEFdOcENeh2ofw%2FbDylh7UjSl3eGB50qp7OsFMAv%2FuV30j6UG143y2yzwrJA6cDqr1t5ErSrcvGZ0HuVZhW9XanobPL7I6o3MKeuJlGgU%2FQ69A5JDHOgwQHKaMGcr%2F61QsalAMaAgg1vvbcPx8QS7xEEz%2FCYqiDEzstnvmGPJWZPrE%2Bo3gfcxcTyboM38Ze014y5aJMdhyAIyBY4nHgcfDIPt8nzy7ulZnuyNvFppc9eWIqHHrwfug%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A02%3A30&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;092244780398&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.21:02:30.949 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.21:04:18.784 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505857527
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，商户订单号: 092244780398
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 21:04:15
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.21:04:18.785 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付回调，更新订单 092244780398
25-03-14.21:04:18.855 [http-nio-8081-exec-3] INFO  PayPort                - 拼团订单结算, userId: Eason4, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=092244780398, payTime=2025-03-14T21:04:18.785522700), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=092244780398, teamId=93492500, activityId=100123))
25-03-14.21:05:44.420 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.21:50:01.205 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 122964 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.21:50:01.207 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.21:50:02.008 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.21:50:02.018 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.21:50:02.019 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.21:50:02.019 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.21:50:02.078 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.21:50:02.079 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 847 ms
25-03-14.21:50:02.744 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.21:50:02.953 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.21:50:02.965 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.21:50:02.967 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.21:50:03.003 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#74c9e11:0/SimpleConnection@279c4e3b [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=60834]
25-03-14.21:50:03.040 [main            ] INFO  Application            - Started Application in 2.259 seconds (process running for 2.68)
25-03-14.21:50:40.759 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.21:50:40.759 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.21:50:40.761 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-03-14.21:50:40.824 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.21:50:40.877 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.21:50:41.031 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1c42b569
25-03-14.21:50:41.033 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.21:50:51.120 [http-nio-8081-exec-1] ERROR PayPort                - 营销锁单失败 userId: Eason5, orderItemId: 337356934289
java.net.SocketTimeoutException: timeout
	at okio.Okio$4.newTimeoutException(Okio.java:232)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:286)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:118)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:89)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.SocketException: Socket closed
	at java.base/sun.nio.ch.NioSocketImpl.endRead(NioSocketImpl.java:253)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:332)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	... 75 common frames omitted
25-03-14.21:50:51.215 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='337356934289', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Ix9MvoSrWRRjPfUU7fu5I9GuV5lxJujYM%2FUVMfG5F%2FSGBocMJd2%2Bb0FQOcTTpNlHJeeKXEvQkLx%2Fi4uwzGGbiCQjsTSxw%2BBcqnaAbdnQXsHnm9p6xVMJpNSUsBC04de0VGz2xPf1ETIr4llGwl%2BkR%2F7xHzbuc9pVS9V8FHnqwd%2BQU%2BSxInRu8nEAd6QYh26mxrP2L%2BPMn3UuJIZbRtC7ciwkfD%2BubUAqRxyHorbN5%2FHYSAO3J4hAVEKue6jANfZPnk7e8MSt6DHVv9UXq%2BFqp3B4Il%2BW%2BQKdgiOKjl6%2BUfhaRINR0Ic%2F66DdM3GHn8KrTuprp1HVJGAfCgECuutpTA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A50%3A51&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;337356934289&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.21:50:51.229 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Ix9MvoSrWRRjPfUU7fu5I9GuV5lxJujYM%2FUVMfG5F%2FSGBocMJd2%2Bb0FQOcTTpNlHJeeKXEvQkLx%2Fi4uwzGGbiCQjsTSxw%2BBcqnaAbdnQXsHnm9p6xVMJpNSUsBC04de0VGz2xPf1ETIr4llGwl%2BkR%2F7xHzbuc9pVS9V8FHnqwd%2BQU%2BSxInRu8nEAd6QYh26mxrP2L%2BPMn3UuJIZbRtC7ciwkfD%2BubUAqRxyHorbN5%2FHYSAO3J4hAVEKue6jANfZPnk7e8MSt6DHVv9UXq%2BFqp3B4Il%2BW%2BQKdgiOKjl6%2BUfhaRINR0Ic%2F66DdM3GHn8KrTuprp1HVJGAfCgECuutpTA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A50%3A51&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;337356934289&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.21:50:51.230 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason5 orderId: 337356934289 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Ix9MvoSrWRRjPfUU7fu5I9GuV5lxJujYM%2FUVMfG5F%2FSGBocMJd2%2Bb0FQOcTTpNlHJeeKXEvQkLx%2Fi4uwzGGbiCQjsTSxw%2BBcqnaAbdnQXsHnm9p6xVMJpNSUsBC04de0VGz2xPf1ETIr4llGwl%2BkR%2F7xHzbuc9pVS9V8FHnqwd%2BQU%2BSxInRu8nEAd6QYh26mxrP2L%2BPMn3UuJIZbRtC7ciwkfD%2BubUAqRxyHorbN5%2FHYSAO3J4hAVEKue6jANfZPnk7e8MSt6DHVv9UXq%2BFqp3B4Il%2BW%2BQKdgiOKjl6%2BUfhaRINR0Ic%2F66DdM3GHn8KrTuprp1HVJGAfCgECuutpTA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A50%3A51&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;337356934289&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.21:50:51.230 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.21:51:21.838 [http-nio-8081-exec-5] INFO  PayController          - 正在创建订单...
25-03-14.21:51:22.099 [http-nio-8081-exec-5] INFO  PayPort                - 拼团订单锁定, userId: Eason5, request: LockMarketPayOrderRequestDTO(userId=Eason5, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=386049802948, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=444351721429, teamId=22139998, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.21:51:22.109 [http-nio-8081-exec-5] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='386049802948', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=L9HkxrZMd5ALuPRJGPnLyqyJXFBLBZDx9lcbRHaujbrwRO7fwPKdn6iHM%2FfIR0iUBYXWJ157RXnCtDPubX9az7pli90ZzWc5sglDVHG%2F42q%2FPw1tiUVu0dMnYEohLjASSiuCokxBi2Zfnvkr2z6DnF8GSDV47u9nJTtr%2FQ3TSFIvI7JXdXfghVfvVRHFtjjL%2FPBF39tlTHbgBnCqyCIG5gSnYhXFd9ooOX2XoA%2BeiCnPah4UxUq9Rz85CALRJHMYxC6Vf%2B%2FGOu4kLfq%2BvTyZ2GF97TorJnowD6JMP5Le%2FZuY7N%2FJg3GhybvKaiGPnGmX%2F1%2FS0CQ8IuL38xFwPy7GrA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A51%3A22&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;386049802948&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.21:51:22.118 [http-nio-8081-exec-5] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=L9HkxrZMd5ALuPRJGPnLyqyJXFBLBZDx9lcbRHaujbrwRO7fwPKdn6iHM%2FfIR0iUBYXWJ157RXnCtDPubX9az7pli90ZzWc5sglDVHG%2F42q%2FPw1tiUVu0dMnYEohLjASSiuCokxBi2Zfnvkr2z6DnF8GSDV47u9nJTtr%2FQ3TSFIvI7JXdXfghVfvVRHFtjjL%2FPBF39tlTHbgBnCqyCIG5gSnYhXFd9ooOX2XoA%2BeiCnPah4UxUq9Rz85CALRJHMYxC6Vf%2B%2FGOu4kLfq%2BvTyZ2GF97TorJnowD6JMP5Le%2FZuY7N%2FJg3GhybvKaiGPnGmX%2F1%2FS0CQ8IuL38xFwPy7GrA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A51%3A22&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;386049802948&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.21:51:22.118 [http-nio-8081-exec-5] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason5 orderId: 386049802948 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=L9HkxrZMd5ALuPRJGPnLyqyJXFBLBZDx9lcbRHaujbrwRO7fwPKdn6iHM%2FfIR0iUBYXWJ157RXnCtDPubX9az7pli90ZzWc5sglDVHG%2F42q%2FPw1tiUVu0dMnYEohLjASSiuCokxBi2Zfnvkr2z6DnF8GSDV47u9nJTtr%2FQ3TSFIvI7JXdXfghVfvVRHFtjjL%2FPBF39tlTHbgBnCqyCIG5gSnYhXFd9ooOX2XoA%2BeiCnPah4UxUq9Rz85CALRJHMYxC6Vf%2B%2FGOu4kLfq%2BvTyZ2GF97TorJnowD6JMP5Le%2FZuY7N%2FJg3GhybvKaiGPnGmX%2F1%2FS0CQ8IuL38xFwPy7GrA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A51%3A22&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;386049802948&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.21:51:22.118 [http-nio-8081-exec-5] INFO  PayController          - 创建订单成功!
25-03-14.21:52:41.538 [http-nio-8081-exec-6] INFO  PayController          - 正在创建订单...
25-03-14.21:52:41.800 [http-nio-8081-exec-6] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=600378214182, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=827500009547, teamId=89740791, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.21:52:41.807 [http-nio-8081-exec-6] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='600378214182', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Rff8dbP49yzRz%2B3CqQTLpopTqjoZQeI0vPybF9LWikHGrEvcc%2BFHoewQaMOZK%2F7wKlsHBpXBMzlVq9VcndpQQURg9Lh4yIhSvdRF%2FZl0tfE2KEV7dG%2BRyXB5szte4YerQftB6Gk%2F0sDpbncWy1qscqnNbi9S1dFWVLZ1890mqU6dtEwjdWwpK4Y%2BJCEkz3kJFspwTHfdI9fBp62HtgZQ4giZFmIOG8CUsQ%2FGGFqtzAn6ElBdnI4V8G1mJjoDWY5sK89A7Z0%2FzgD9%2Fo4%2F%2Fm6y1cjt9xywz1mX2oIAsl%2FUbm8vcAnmMecNpGX79J%2FpTrMGCr3J7SbcChH6xNkJRN8Dnw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A52%3A41&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;600378214182&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.21:52:41.819 [http-nio-8081-exec-6] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Rff8dbP49yzRz%2B3CqQTLpopTqjoZQeI0vPybF9LWikHGrEvcc%2BFHoewQaMOZK%2F7wKlsHBpXBMzlVq9VcndpQQURg9Lh4yIhSvdRF%2FZl0tfE2KEV7dG%2BRyXB5szte4YerQftB6Gk%2F0sDpbncWy1qscqnNbi9S1dFWVLZ1890mqU6dtEwjdWwpK4Y%2BJCEkz3kJFspwTHfdI9fBp62HtgZQ4giZFmIOG8CUsQ%2FGGFqtzAn6ElBdnI4V8G1mJjoDWY5sK89A7Z0%2FzgD9%2Fo4%2F%2Fm6y1cjt9xywz1mX2oIAsl%2FUbm8vcAnmMecNpGX79J%2FpTrMGCr3J7SbcChH6xNkJRN8Dnw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A52%3A41&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;600378214182&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.21:52:41.819 [http-nio-8081-exec-6] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 600378214182 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Rff8dbP49yzRz%2B3CqQTLpopTqjoZQeI0vPybF9LWikHGrEvcc%2BFHoewQaMOZK%2F7wKlsHBpXBMzlVq9VcndpQQURg9Lh4yIhSvdRF%2FZl0tfE2KEV7dG%2BRyXB5szte4YerQftB6Gk%2F0sDpbncWy1qscqnNbi9S1dFWVLZ1890mqU6dtEwjdWwpK4Y%2BJCEkz3kJFspwTHfdI9fBp62HtgZQ4giZFmIOG8CUsQ%2FGGFqtzAn6ElBdnI4V8G1mJjoDWY5sK89A7Z0%2FzgD9%2Fo4%2F%2Fm6y1cjt9xywz1mX2oIAsl%2FUbm8vcAnmMecNpGX79J%2FpTrMGCr3J7SbcChH6xNkJRN8Dnw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A52%3A41&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;600378214182&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.21:52:41.819 [http-nio-8081-exec-6] INFO  PayController          - 创建订单成功!
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505855115
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，商户订单号: 600378214182
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 21:53:58
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.21:54:02.486 [http-nio-8081-exec-4] INFO  PayController          - 支付回调，支付回调，更新订单 600378214182
25-03-14.21:54:02.551 [http-nio-8081-exec-4] INFO  PayPort                - 拼团订单结算, userId: Eason4, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=600378214182, payTime=2025-03-14T21:54:02.486199), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=600378214182, teamId=89740791, activityId=100123))
25-03-14.21:54:28.547 [http-nio-8081-exec-8] INFO  PayController          - 正在创建订单...
25-03-14.21:54:28.606 [http-nio-8081-exec-8] INFO  PayPort                - 拼团订单锁定, userId: Eason5, request: LockMarketPayOrderRequestDTO(userId=Eason5, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=541711073818, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=049281604871, teamId=22305139, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.21:54:28.614 [http-nio-8081-exec-8] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='541711073818', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Y3oAK2pgvcbxzegAELKg5jGEq39pCVowp8jh5VOYGdjJnhnqMRM2vqBLxaEEt%2BQM2l%2FBlEy5K0xgjLpbm%2FP14bJSa%2BnaYWB5d2wg7FthQ9lQvkL2K3jo038ynrW%2BfcqoalvV2V0dXUNoO9f8bOdMXEySSejVikhkfDrhWDR2e4PoHGlEKEvdCm4HSG1N3gdWifPV958QzBmVs0t64FsHm0IWbHtwWDeVz3BBBuFuVf5Jndhk%2FDM%2FPReQt%2F3C5yzGpSsvE5mE0j2dWblqUmG1xuTB6jUOJdwrpmp8tF5MsMroR6qJnUjKXcyqsLw8btCe%2FGP23HaYR0g46Dje4KJMrg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A54%3A28&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;541711073818&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.21:54:28.626 [http-nio-8081-exec-8] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Y3oAK2pgvcbxzegAELKg5jGEq39pCVowp8jh5VOYGdjJnhnqMRM2vqBLxaEEt%2BQM2l%2FBlEy5K0xgjLpbm%2FP14bJSa%2BnaYWB5d2wg7FthQ9lQvkL2K3jo038ynrW%2BfcqoalvV2V0dXUNoO9f8bOdMXEySSejVikhkfDrhWDR2e4PoHGlEKEvdCm4HSG1N3gdWifPV958QzBmVs0t64FsHm0IWbHtwWDeVz3BBBuFuVf5Jndhk%2FDM%2FPReQt%2F3C5yzGpSsvE5mE0j2dWblqUmG1xuTB6jUOJdwrpmp8tF5MsMroR6qJnUjKXcyqsLw8btCe%2FGP23HaYR0g46Dje4KJMrg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A54%3A28&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;541711073818&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.21:54:28.627 [http-nio-8081-exec-8] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason5 orderId: 541711073818 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Y3oAK2pgvcbxzegAELKg5jGEq39pCVowp8jh5VOYGdjJnhnqMRM2vqBLxaEEt%2BQM2l%2FBlEy5K0xgjLpbm%2FP14bJSa%2BnaYWB5d2wg7FthQ9lQvkL2K3jo038ynrW%2BfcqoalvV2V0dXUNoO9f8bOdMXEySSejVikhkfDrhWDR2e4PoHGlEKEvdCm4HSG1N3gdWifPV958QzBmVs0t64FsHm0IWbHtwWDeVz3BBBuFuVf5Jndhk%2FDM%2FPReQt%2F3C5yzGpSsvE5mE0j2dWblqUmG1xuTB6jUOJdwrpmp8tF5MsMroR6qJnUjKXcyqsLw8btCe%2FGP23HaYR0g46Dje4KJMrg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A54%3A28&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;541711073818&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.21:54:28.627 [http-nio-8081-exec-8] INFO  PayController          - 创建订单成功!
25-03-14.21:55:32.248 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505856121
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，商户订单号: 541711073818
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 21:55:28
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.21:55:32.249 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，支付回调，更新订单 541711073818
25-03-14.21:55:32.309 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单结算, userId: Eason5, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason5, outerOrderId=541711073818, payTime=2025-03-14T21:55:32.249675600), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason5, outerOrderId=541711073818, teamId=22305139, activityId=100123))
25-03-14.21:57:37.685 [http-nio-8081-exec-5] INFO  PayController          - 正在创建订单...
25-03-14.21:57:47.707 [http-nio-8081-exec-5] ERROR PayPort                - 营销锁单失败 userId: Eason4, orderItemId: 071829569914
java.net.SocketTimeoutException: Read timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:288)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:314)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:118)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:89)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-03-14.21:57:47.715 [http-nio-8081-exec-5] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='071829569914', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=DXvw%2FS9zqvxXCOMrIJSHIB4sj7hUnq9bx50jLEj92DauaUawiY2vZQwKgW%2FiPBBzSYGkZjuvP%2BjO%2B5vlTM7bdWkk6DPDnGEYvyjqgI%2FlnevYcZxyP5nQl2hBrnJDJ5nF4FP2K%2FscrilfFQ5TT2CfhpDdSdjCsEiE7j%2BlIxT8iT8qo1dC3VsPVkgV7bXimh%2FAwg8LozVG7edQJs%2BP%2FCFPdTnmXbwqvNpcMNGJNayQAqRqLW%2F3aXAOuvRCZCgtAokla3JpktjxrB9vyB99kxjnTfqPEP4Ktuek702iQUzczGn8eQUGin6IINgwYTwUtHoS1QJxK4wyXM7Ayk1SyChjng%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A57%3A47&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;071829569914&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.21:57:47.724 [http-nio-8081-exec-5] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=DXvw%2FS9zqvxXCOMrIJSHIB4sj7hUnq9bx50jLEj92DauaUawiY2vZQwKgW%2FiPBBzSYGkZjuvP%2BjO%2B5vlTM7bdWkk6DPDnGEYvyjqgI%2FlnevYcZxyP5nQl2hBrnJDJ5nF4FP2K%2FscrilfFQ5TT2CfhpDdSdjCsEiE7j%2BlIxT8iT8qo1dC3VsPVkgV7bXimh%2FAwg8LozVG7edQJs%2BP%2FCFPdTnmXbwqvNpcMNGJNayQAqRqLW%2F3aXAOuvRCZCgtAokla3JpktjxrB9vyB99kxjnTfqPEP4Ktuek702iQUzczGn8eQUGin6IINgwYTwUtHoS1QJxK4wyXM7Ayk1SyChjng%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A57%3A47&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;071829569914&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.21:57:47.724 [http-nio-8081-exec-5] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 071829569914 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=DXvw%2FS9zqvxXCOMrIJSHIB4sj7hUnq9bx50jLEj92DauaUawiY2vZQwKgW%2FiPBBzSYGkZjuvP%2BjO%2B5vlTM7bdWkk6DPDnGEYvyjqgI%2FlnevYcZxyP5nQl2hBrnJDJ5nF4FP2K%2FscrilfFQ5TT2CfhpDdSdjCsEiE7j%2BlIxT8iT8qo1dC3VsPVkgV7bXimh%2FAwg8LozVG7edQJs%2BP%2FCFPdTnmXbwqvNpcMNGJNayQAqRqLW%2F3aXAOuvRCZCgtAokla3JpktjxrB9vyB99kxjnTfqPEP4Ktuek702iQUzczGn8eQUGin6IINgwYTwUtHoS1QJxK4wyXM7Ayk1SyChjng%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A57%3A47&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;071829569914&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.21:57:47.724 [http-nio-8081-exec-5] INFO  PayController          - 创建订单成功!
25-03-14.21:58:35.819 [http-nio-8081-exec-6] INFO  PayController          - 正在创建订单...
25-03-14.21:58:36.084 [http-nio-8081-exec-6] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=89740791, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=875183426426, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=用户 ID:Eason4 已经参加过 1 次活动, 活动 ID: 100123, 不可继续参加!, code=0, data=null)
25-03-14.21:58:36.084 [http-nio-8081-exec-6] ERROR PayController          - 创建订单错误! 错误信息: 
xin.eason.types.exception.AppException: null
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:123)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:89)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-03-14.21:59:05.607 [http-nio-8081-exec-4] INFO  PayController          - 正在创建订单...
25-03-14.21:59:05.683 [http-nio-8081-exec-4] INFO  PayPort                - 拼团订单锁定, userId: Eason6, request: LockMarketPayOrderRequestDTO(userId=Eason6, teamId=89740791, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=792341380159, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=340564764357, teamId=89740791, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.21:59:05.692 [http-nio-8081-exec-4] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='792341380159', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=MhqfXjACEnIHMVpLDBTCQ7kPVivJYmytNdZp9%2FZyIfXeeFA2yI6uQCfdKugTxGAVb90VHIW5%2BOVo682kdJJn0KUfjAZmcV%2BrKODm5nBnSwMgLJ5HAMsfzUFM%2BYXZstRTJf%2BUGn4LIAsBchItdFBMBe4FufVaG3FJHC2MVFhViKhaeoaYMsUTRVBBYk00qHcIjgHL3lXbBh5K3otDe9z43JO2Ixr2T8T%2F0Y4KXum24BUeVEXD8v3rNeu5H7xXiVOBOAsEZBAsU2uSx%2Fcx61c9zeWKgFapIxKAfc8hQwQK5PUYnV6T6P%2BQ1hxy51z2soQQzM0A61TJ0Sr%2FajQ9fIHVug%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A59%3A05&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;792341380159&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.21:59:05.702 [http-nio-8081-exec-4] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=MhqfXjACEnIHMVpLDBTCQ7kPVivJYmytNdZp9%2FZyIfXeeFA2yI6uQCfdKugTxGAVb90VHIW5%2BOVo682kdJJn0KUfjAZmcV%2BrKODm5nBnSwMgLJ5HAMsfzUFM%2BYXZstRTJf%2BUGn4LIAsBchItdFBMBe4FufVaG3FJHC2MVFhViKhaeoaYMsUTRVBBYk00qHcIjgHL3lXbBh5K3otDe9z43JO2Ixr2T8T%2F0Y4KXum24BUeVEXD8v3rNeu5H7xXiVOBOAsEZBAsU2uSx%2Fcx61c9zeWKgFapIxKAfc8hQwQK5PUYnV6T6P%2BQ1hxy51z2soQQzM0A61TJ0Sr%2FajQ9fIHVug%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A59%3A05&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;792341380159&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.21:59:05.702 [http-nio-8081-exec-4] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason6 orderId: 792341380159 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=MhqfXjACEnIHMVpLDBTCQ7kPVivJYmytNdZp9%2FZyIfXeeFA2yI6uQCfdKugTxGAVb90VHIW5%2BOVo682kdJJn0KUfjAZmcV%2BrKODm5nBnSwMgLJ5HAMsfzUFM%2BYXZstRTJf%2BUGn4LIAsBchItdFBMBe4FufVaG3FJHC2MVFhViKhaeoaYMsUTRVBBYk00qHcIjgHL3lXbBh5K3otDe9z43JO2Ixr2T8T%2F0Y4KXum24BUeVEXD8v3rNeu5H7xXiVOBOAsEZBAsU2uSx%2Fcx61c9zeWKgFapIxKAfc8hQwQK5PUYnV6T6P%2BQ1hxy51z2soQQzM0A61TJ0Sr%2FajQ9fIHVug%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+21%3A59%3A05&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;792341380159&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.21:59:05.702 [http-nio-8081-exec-4] INFO  PayController          - 创建订单成功!
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505860628
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，商户订单号: 792341380159
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:00:32
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:00:36.522 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，支付回调，更新订单 792341380159
25-03-14.22:00:36.567 [http-nio-8081-exec-9] INFO  PayPort                - 拼团订单结算, userId: Eason6, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason6, outerOrderId=792341380159, payTime=2025-03-14T22:00:36.522666100), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason6, outerOrderId=792341380159, teamId=89740791, activityId=100123))
25-03-14.22:01:02.553 [http-nio-8081-exec-10] INFO  PayController          - 正在创建订单...
25-03-14.22:01:02.617 [http-nio-8081-exec-10] INFO  PayPort                - 拼团订单锁定, userId: Eason8, request: LockMarketPayOrderRequestDTO(userId=Eason8, teamId=89740791, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=796610098913, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=854755652069, teamId=89740791, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:01:02.625 [http-nio-8081-exec-10] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='796610098913', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=a%2B4J7HRfTuKAmKe84x3AcTI0Y1UOcu9UrzNvaop%2FvKVxIezmXyy%2F2ZriR8yOy5z4t%2Fa7KUdCzXu4ez%2BToJZoFmPvY0FnqnqkQUKkgNqtjL66wHi7XkXBNHn7E%2BEX%2BPq1ZwT89cTzLcjgsR28jhQLMD0T8%2FjnD62uBwhiZZ9lPiTOMa3nW5xKiOq8ivXzfQolWOoeyY%2BSUORIQ8%2BHGY7KQD2cCfUodO6Wza%2BaTSwASqgqzM5JpPhUQMpIIdzRPmc1BRa5Nskg4tg0SEe%2B7P2fsHZw%2Bo1wEjT%2BwXNyK9dRKYxNLh5FPmOrJ8cdYWY1n9YdtlCQMMoH0HoTdpewDeColA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A01%3A02&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;796610098913&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:01:02.633 [http-nio-8081-exec-10] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=a%2B4J7HRfTuKAmKe84x3AcTI0Y1UOcu9UrzNvaop%2FvKVxIezmXyy%2F2ZriR8yOy5z4t%2Fa7KUdCzXu4ez%2BToJZoFmPvY0FnqnqkQUKkgNqtjL66wHi7XkXBNHn7E%2BEX%2BPq1ZwT89cTzLcjgsR28jhQLMD0T8%2FjnD62uBwhiZZ9lPiTOMa3nW5xKiOq8ivXzfQolWOoeyY%2BSUORIQ8%2BHGY7KQD2cCfUodO6Wza%2BaTSwASqgqzM5JpPhUQMpIIdzRPmc1BRa5Nskg4tg0SEe%2B7P2fsHZw%2Bo1wEjT%2BwXNyK9dRKYxNLh5FPmOrJ8cdYWY1n9YdtlCQMMoH0HoTdpewDeColA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A01%3A02&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;796610098913&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:01:02.633 [http-nio-8081-exec-10] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason8 orderId: 796610098913 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=a%2B4J7HRfTuKAmKe84x3AcTI0Y1UOcu9UrzNvaop%2FvKVxIezmXyy%2F2ZriR8yOy5z4t%2Fa7KUdCzXu4ez%2BToJZoFmPvY0FnqnqkQUKkgNqtjL66wHi7XkXBNHn7E%2BEX%2BPq1ZwT89cTzLcjgsR28jhQLMD0T8%2FjnD62uBwhiZZ9lPiTOMa3nW5xKiOq8ivXzfQolWOoeyY%2BSUORIQ8%2BHGY7KQD2cCfUodO6Wza%2BaTSwASqgqzM5JpPhUQMpIIdzRPmc1BRa5Nskg4tg0SEe%2B7P2fsHZw%2Bo1wEjT%2BwXNyK9dRKYxNLh5FPmOrJ8cdYWY1n9YdtlCQMMoH0HoTdpewDeColA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A01%3A02&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;796610098913&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:01:02.633 [http-nio-8081-exec-10] INFO  PayController          - 创建订单成功!
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505857528
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，商户订单号: 796610098913
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:02:13
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:02:17.640 [http-nio-8081-exec-5] INFO  PayController          - 支付回调，支付回调，更新订单 796610098913
25-03-14.22:02:17.823 [http-nio-8081-exec-3] INFO  PayController          - 接收到拼团系统回调 requestParam: GroupBuyNotifyDTO(teamId=89740791, outerOrderIdIdList=null)
25-03-14.22:02:17.823 [http-nio-8081-exec-3] ERROR PayController          - 设置 orderIdList: null 订单状态为 已完成 过程出现异常!
java.lang.NullPointerException: Cannot invoke "java.util.List.forEach(java.util.function.Consumer)" because "orderIdList" is null
	at xin.eason.domain.order.service.OrderService.orderDelivery(OrderService.java:173)
	at xin.eason.trigger.http.PayController.groupBuyNotify(PayController.java:126)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-03-14.22:02:17.882 [http-nio-8081-exec-5] INFO  PayPort                - 拼团订单结算, userId: Eason8, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason8, outerOrderId=796610098913, payTime=2025-03-14T22:02:17.640833900), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason8, outerOrderId=796610098913, teamId=89740791, activityId=100123))
25-03-14.22:08:11.224 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.22:08:12.079 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.22:08:12.079 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.22:08:12.156 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.22:08:12.161 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-03-14.22:08:12.167 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-03-14.22:08:16.098 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 169736 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.22:08:16.099 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.22:08:16.862 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.22:08:16.877 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.22:08:16.878 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.22:08:16.878 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.22:08:16.930 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.22:08:16.930 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 800 ms
25-03-14.22:08:17.603 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.22:08:17.834 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.22:08:17.847 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.22:08:17.848 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.22:08:17.881 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4f235107:0/SimpleConnection@5c79c5ec [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=61972]
25-03-14.22:08:17.919 [main            ] INFO  Application            - Started Application in 2.223 seconds (process running for 2.79)
25-03-14.22:08:25.374 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.22:08:25.374 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.22:08:25.375 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.22:08:25.446 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.22:08:25.449 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.22:08:25.586 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2b1d1397
25-03-14.22:08:25.587 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.22:08:39.840 [http-nio-8081-exec-1] ERROR PayPort                - 营销锁单失败 userId: Eason8, orderItemId: 513493941766
java.net.SocketTimeoutException: timeout
	at okio.Okio$4.newTimeoutException(Okio.java:232)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:286)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.lockMarketOrder(PayPort.java:118)
	at xin.eason.domain.order.service.OrderService.lockMarketOrder(OrderService.java:70)
	at xin.eason.domain.order.service.AbstractOrderService.createOrder(AbstractOrderService.java:91)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at xin.eason.domain.order.service.OrderService$$SpringCGLIB$$0.createOrder(<generated>)
	at xin.eason.trigger.http.PayController.pay(PayController.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.SocketTimeoutException: Read timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:288)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:314)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	... 87 common frames omitted
25-03-14.22:08:53.003 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='513493941766', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=dUMhc4EjHBOKBLnHlk99iBjQPMEp6bAKO203nf1udZAm43cVH6pshxps06t1Dldc6HlbBagbrQQKjTIYB0m%2FnLGouwQfxP43yTR0n3oE0JSvSX8h8N7DRWFQkf%2B0CbX9rBHfxg5dlNc6ChvNtACEooUDXFkViMlYDl%2B6lPcotVEvw741ftHxhOS3JmBvFkuxpQjr%2BNTbgN3hjOmHBotPJvpfnNbFeKl90Mf9xSNBFp%2BNJ52G9i%2Fu3MefJ4qeREkwQXVjNZDPbGv9hFIk34AfrtELPDh8A3HPjygdnnwtMPeOmJccZdX%2Fcy41lBROuYFwI%2Fp4XTaEbAXgwbV%2BOuslgA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A08%3A39&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;513493941766&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:08:53.012 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=dUMhc4EjHBOKBLnHlk99iBjQPMEp6bAKO203nf1udZAm43cVH6pshxps06t1Dldc6HlbBagbrQQKjTIYB0m%2FnLGouwQfxP43yTR0n3oE0JSvSX8h8N7DRWFQkf%2B0CbX9rBHfxg5dlNc6ChvNtACEooUDXFkViMlYDl%2B6lPcotVEvw741ftHxhOS3JmBvFkuxpQjr%2BNTbgN3hjOmHBotPJvpfnNbFeKl90Mf9xSNBFp%2BNJ52G9i%2Fu3MefJ4qeREkwQXVjNZDPbGv9hFIk34AfrtELPDh8A3HPjygdnnwtMPeOmJccZdX%2Fcy41lBROuYFwI%2Fp4XTaEbAXgwbV%2BOuslgA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A08%3A39&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;513493941766&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:08:53.012 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason8 orderId: 513493941766 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=dUMhc4EjHBOKBLnHlk99iBjQPMEp6bAKO203nf1udZAm43cVH6pshxps06t1Dldc6HlbBagbrQQKjTIYB0m%2FnLGouwQfxP43yTR0n3oE0JSvSX8h8N7DRWFQkf%2B0CbX9rBHfxg5dlNc6ChvNtACEooUDXFkViMlYDl%2B6lPcotVEvw741ftHxhOS3JmBvFkuxpQjr%2BNTbgN3hjOmHBotPJvpfnNbFeKl90Mf9xSNBFp%2BNJ52G9i%2Fu3MefJ4qeREkwQXVjNZDPbGv9hFIk34AfrtELPDh8A3HPjygdnnwtMPeOmJccZdX%2Fcy41lBROuYFwI%2Fp4XTaEbAXgwbV%2BOuslgA%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A08%3A39&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;513493941766&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: null
25-03-14.22:08:53.027 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.22:08:53.045 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.22:08:54.015 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.22:08:54.016 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.22:08:54.094 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.22:08:54.098 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-03-14.22:08:54.106 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-03-14.22:09:27.265 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 164964 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.22:09:27.266 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.22:09:28.115 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.22:09:28.125 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.22:09:28.126 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.22:09:28.126 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.22:09:28.180 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.22:09:28.180 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 880 ms
25-03-14.22:09:28.845 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.22:09:29.089 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.22:09:29.104 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.22:09:29.105 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.22:09:29.141 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4f235107:0/SimpleConnection@5c79c5ec [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=61882]
25-03-14.22:09:29.183 [main            ] INFO  Application            - Started Application in 2.392 seconds (process running for 2.9)
25-03-14.22:09:30.963 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.22:09:30.964 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.22:09:30.964 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-03-14.22:09:31.028 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.22:09:31.032 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.22:09:31.180 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@108b8635
25-03-14.22:09:31.181 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.22:09:31.558 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单锁定, userId: Eason8, request: LockMarketPayOrderRequestDTO(userId=Eason8, teamId=89740791, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=247181795263, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=627705759235, teamId=89740791, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:09:31.672 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='247181795263', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=UTQsz6eJPCAY1EAc%2BWd0KMY5%2BkNq%2BJhUhdE7kLTiyo3QkHR%2Bx%2B49sCOuorp50E9yRkyPRQ57O7eMMyX58%2BmwUfxI10eAjq8CChkJoR6zdqoMnFzErICUUc%2FMIz6c0HYH%2BRrlv6JNP0UpXY18M3ova6lE34KcGPz9IYi0gkK9KWd3u5fbU7NYxpNeB6VKwl0qjB2pgRcllf4RBlDz9Q1aGyX5QXJ77Wymjde3Vedor7wGmE4S0WHZM6jMDsDsM8JB9aAeEYQUvUMX%2BaNdtM6m0%2BUAwZAQOUoiOOIsEth9AyuPtsueYmoMIekZjl9d5mr5IubIRJY7jc2F%2Bv4ghXkjHg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A09%3A31&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;247181795263&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:09:31.678 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=UTQsz6eJPCAY1EAc%2BWd0KMY5%2BkNq%2BJhUhdE7kLTiyo3QkHR%2Bx%2B49sCOuorp50E9yRkyPRQ57O7eMMyX58%2BmwUfxI10eAjq8CChkJoR6zdqoMnFzErICUUc%2FMIz6c0HYH%2BRrlv6JNP0UpXY18M3ova6lE34KcGPz9IYi0gkK9KWd3u5fbU7NYxpNeB6VKwl0qjB2pgRcllf4RBlDz9Q1aGyX5QXJ77Wymjde3Vedor7wGmE4S0WHZM6jMDsDsM8JB9aAeEYQUvUMX%2BaNdtM6m0%2BUAwZAQOUoiOOIsEth9AyuPtsueYmoMIekZjl9d5mr5IubIRJY7jc2F%2Bv4ghXkjHg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A09%3A31&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;247181795263&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:09:31.678 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason8 orderId: 247181795263 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=UTQsz6eJPCAY1EAc%2BWd0KMY5%2BkNq%2BJhUhdE7kLTiyo3QkHR%2Bx%2B49sCOuorp50E9yRkyPRQ57O7eMMyX58%2BmwUfxI10eAjq8CChkJoR6zdqoMnFzErICUUc%2FMIz6c0HYH%2BRrlv6JNP0UpXY18M3ova6lE34KcGPz9IYi0gkK9KWd3u5fbU7NYxpNeB6VKwl0qjB2pgRcllf4RBlDz9Q1aGyX5QXJ77Wymjde3Vedor7wGmE4S0WHZM6jMDsDsM8JB9aAeEYQUvUMX%2BaNdtM6m0%2BUAwZAQOUoiOOIsEth9AyuPtsueYmoMIekZjl9d5mr5IubIRJY7jc2F%2Bv4ghXkjHg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A09%3A31&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;247181795263&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:09:31.691 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.22:10:15.606 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:10:15.606 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:10:15.606 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:10:15.606 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505857529
25-03-14.22:10:15.606 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，商户订单号: 247181795263
25-03-14.22:10:15.606 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:10:15.606 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:10:15.606 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:10:11
25-03-14.22:10:15.608 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:10:15.608 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付回调，更新订单 247181795263
25-03-14.22:10:15.816 [http-nio-8081-exec-8] INFO  PayController          - 接收到拼团系统回调 requestParam: GroupBuyNotifyDTO(teamId=89740791, outerOrderIdIdList=null)
25-03-14.22:10:15.817 [http-nio-8081-exec-8] ERROR PayController          - 设置 orderIdList: null 订单状态为 已完成 过程出现异常! requestParam: GroupBuyNotifyDTO(teamId=89740791, outerOrderIdIdList=null)
java.lang.NullPointerException: Cannot invoke "java.util.List.forEach(java.util.function.Consumer)" because "orderIdList" is null
	at xin.eason.domain.order.service.OrderService.orderDelivery(OrderService.java:173)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723)
	at xin.eason.domain.order.service.OrderService$$SpringCGLIB$$0.orderDelivery(<generated>)
	at xin.eason.trigger.http.PayController.groupBuyNotify(PayController.java:126)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-03-14.22:10:15.884 [http-nio-8081-exec-3] INFO  PayPort                - 拼团订单结算, userId: Eason8, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason8, outerOrderId=247181795263, payTime=2025-03-14T22:10:15.608510200), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason8, outerOrderId=247181795263, teamId=89740791, activityId=100123))
25-03-14.22:15:47.657 [http-nio-8081-exec-7] INFO  PayController          - 正在创建订单...
25-03-14.22:15:53.780 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.22:16:12.105 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 146568 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.22:16:12.106 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.22:16:12.875 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.22:16:12.887 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.22:16:12.888 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.22:16:12.888 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.22:16:12.941 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.22:16:12.941 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 801 ms
25-03-14.22:16:13.592 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.22:16:13.816 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.22:16:13.831 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.22:16:13.832 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.22:16:13.865 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4f235107:0/SimpleConnection@5c79c5ec [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=64451]
25-03-14.22:16:13.902 [main            ] INFO  Application            - Started Application in 2.25 seconds (process running for 2.809)
25-03-14.22:16:16.617 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.22:16:16.617 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.22:16:16.617 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-03-14.22:16:16.682 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.22:16:16.689 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.22:16:16.821 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@73762d0b
25-03-14.22:16:16.822 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.22:16:17.212 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单锁定, userId: Eason8, request: LockMarketPayOrderRequestDTO(userId=Eason8, teamId=89740791, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=103909279608, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=762129102825, teamId=89740791, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:16:17.322 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='103909279608', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=SkXzq45hjxGa56klamGJYoGrvIkS7yVFbRKeDfT4x%2BH3nOAyO%2F%2FMEf9ioPrrHbalUfcvx2llTW4GwctH3bCdxPzHvn6qkvdGd0d2zQ4LSBRwsZNGDMHzXFA0xpal%2BgjfJQM1zksV1jucUbjKWufnLOFwtvQrnxM3tjTggbK6OQEuzM1IfMp%2FC3%2FK8nFtweW7wxQ97SU%2Fzu8mLi%2BG%2FproBWXfZISEN%2F1NusVamBO7Iv4pDhgCkaqrmKBoCKGe5IZBVsv42iuRKjs9866sFKqvEUlcciey1N6z0emIlnSMg9wcE7A2QN4POEs1X4aWH2cAYZp%2FQIuiMZimknbnuCxhMw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A16%3A17&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;103909279608&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:16:17.331 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=SkXzq45hjxGa56klamGJYoGrvIkS7yVFbRKeDfT4x%2BH3nOAyO%2F%2FMEf9ioPrrHbalUfcvx2llTW4GwctH3bCdxPzHvn6qkvdGd0d2zQ4LSBRwsZNGDMHzXFA0xpal%2BgjfJQM1zksV1jucUbjKWufnLOFwtvQrnxM3tjTggbK6OQEuzM1IfMp%2FC3%2FK8nFtweW7wxQ97SU%2Fzu8mLi%2BG%2FproBWXfZISEN%2F1NusVamBO7Iv4pDhgCkaqrmKBoCKGe5IZBVsv42iuRKjs9866sFKqvEUlcciey1N6z0emIlnSMg9wcE7A2QN4POEs1X4aWH2cAYZp%2FQIuiMZimknbnuCxhMw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A16%3A17&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;103909279608&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:16:17.331 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason8 orderId: 103909279608 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=SkXzq45hjxGa56klamGJYoGrvIkS7yVFbRKeDfT4x%2BH3nOAyO%2F%2FMEf9ioPrrHbalUfcvx2llTW4GwctH3bCdxPzHvn6qkvdGd0d2zQ4LSBRwsZNGDMHzXFA0xpal%2BgjfJQM1zksV1jucUbjKWufnLOFwtvQrnxM3tjTggbK6OQEuzM1IfMp%2FC3%2FK8nFtweW7wxQ97SU%2Fzu8mLi%2BG%2FproBWXfZISEN%2F1NusVamBO7Iv4pDhgCkaqrmKBoCKGe5IZBVsv42iuRKjs9866sFKqvEUlcciey1N6z0emIlnSMg9wcE7A2QN4POEs1X4aWH2cAYZp%2FQIuiMZimknbnuCxhMw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A16%3A17&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;103909279608&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:16:17.340 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.22:17:12.727 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505853643
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，商户订单号: 103909279608
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:17:08
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:17:12.728 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付回调，更新订单 103909279608
25-03-14.22:17:12.934 [http-nio-8081-exec-4] INFO  PayController          - 接收到拼团系统回调 requestParam: GroupBuyNotifyDTO(teamId=89740791, outerOrderIdList=null)
25-03-14.22:17:12.934 [http-nio-8081-exec-4] ERROR PayController          - 设置 orderIdList: null 订单状态为 已完成 过程出现异常! requestParam: GroupBuyNotifyDTO(teamId=89740791, outerOrderIdList=null)
java.lang.NullPointerException: Cannot invoke "java.util.List.forEach(java.util.function.Consumer)" because "orderIdList" is null
	at xin.eason.domain.order.service.OrderService.orderDelivery(OrderService.java:173)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723)
	at xin.eason.domain.order.service.OrderService$$SpringCGLIB$$0.orderDelivery(<generated>)
	at xin.eason.trigger.http.PayController.groupBuyNotify(PayController.java:126)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-03-14.22:17:12.992 [http-nio-8081-exec-3] INFO  PayPort                - 拼团订单结算, userId: Eason8, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason8, outerOrderId=103909279608, payTime=2025-03-14T22:17:12.728617100), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason8, outerOrderId=103909279608, teamId=89740791, activityId=100123))
25-03-14.22:18:45.074 [http-nio-8081-exec-7] INFO  PayController          - 正在创建订单...
25-03-14.22:18:45.131 [http-nio-8081-exec-7] INFO  PayPort                - 拼团订单锁定, userId: Eason8, request: LockMarketPayOrderRequestDTO(userId=Eason8, teamId=89740791, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=993344055012, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=234714512855, teamId=89740791, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:18:45.138 [http-nio-8081-exec-7] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='993344055012', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=R2EPBhcCDdz%2BlnEzg684tp%2BSAtUC5qgyemuR4tElDJ%2Biwsk9fzS8w3HRObuwXvphcp67u8qCoLfhnxlLQStlInaG4A40iMBUMjXKOVpIhxQt7IsO5eOn0jAndO4iR2dL7O6U%2FzCYq%2FmJhRTee4xO2nnDevUpM%2FieYdXWQ92PA%2FqRHtJcMUUy8hhjPZFoTKaO8mxziMcwTL6acFAtJsIMn9C%2BQJxPGbrnnNwtwJF4H1t2V1v1wh%2BUZ5JUiJya14YzEONv1wKC44rqB%2BsXeeDAqs%2FU4lMjHDcHfmkFDmNSHXASWbb6lxksknI6dSkiAs6h4qpp2R3AfQFlGjmQXMz9aQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A18%3A45&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;993344055012&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:18:45.142 [http-nio-8081-exec-7] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=R2EPBhcCDdz%2BlnEzg684tp%2BSAtUC5qgyemuR4tElDJ%2Biwsk9fzS8w3HRObuwXvphcp67u8qCoLfhnxlLQStlInaG4A40iMBUMjXKOVpIhxQt7IsO5eOn0jAndO4iR2dL7O6U%2FzCYq%2FmJhRTee4xO2nnDevUpM%2FieYdXWQ92PA%2FqRHtJcMUUy8hhjPZFoTKaO8mxziMcwTL6acFAtJsIMn9C%2BQJxPGbrnnNwtwJF4H1t2V1v1wh%2BUZ5JUiJya14YzEONv1wKC44rqB%2BsXeeDAqs%2FU4lMjHDcHfmkFDmNSHXASWbb6lxksknI6dSkiAs6h4qpp2R3AfQFlGjmQXMz9aQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A18%3A45&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;993344055012&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:18:45.142 [http-nio-8081-exec-7] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason8 orderId: 993344055012 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=R2EPBhcCDdz%2BlnEzg684tp%2BSAtUC5qgyemuR4tElDJ%2Biwsk9fzS8w3HRObuwXvphcp67u8qCoLfhnxlLQStlInaG4A40iMBUMjXKOVpIhxQt7IsO5eOn0jAndO4iR2dL7O6U%2FzCYq%2FmJhRTee4xO2nnDevUpM%2FieYdXWQ92PA%2FqRHtJcMUUy8hhjPZFoTKaO8mxziMcwTL6acFAtJsIMn9C%2BQJxPGbrnnNwtwJF4H1t2V1v1wh%2BUZ5JUiJya14YzEONv1wKC44rqB%2BsXeeDAqs%2FU4lMjHDcHfmkFDmNSHXASWbb6lxksknI6dSkiAs6h4qpp2R3AfQFlGjmQXMz9aQ%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A18%3A45&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;993344055012&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:18:45.148 [http-nio-8081-exec-7] INFO  PayController          - 创建订单成功!
25-03-14.22:19:18.101 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:19:18.101 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:19:18.101 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:19:18.101 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505856122
25-03-14.22:19:18.101 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，商户订单号: 993344055012
25-03-14.22:19:18.102 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:19:18.102 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:19:18.102 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:19:14
25-03-14.22:19:18.102 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:19:18.102 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，支付回调，更新订单 993344055012
25-03-14.22:19:18.164 [http-nio-8081-exec-10] INFO  PayController          - 接收到拼团系统回调 requestParam: GroupBuyNotifyDTO(teamId=89740791, outerOrderIdList=null)
25-03-14.22:19:18.164 [http-nio-8081-exec-10] ERROR PayController          - 设置 orderIdList: null 订单状态为 已完成 过程出现异常! requestParam: GroupBuyNotifyDTO(teamId=89740791, outerOrderIdList=null)
java.lang.NullPointerException: Cannot invoke "java.util.List.forEach(java.util.function.Consumer)" because "orderIdList" is null
	at xin.eason.domain.order.service.OrderService.orderDelivery(OrderService.java:173)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723)
	at xin.eason.domain.order.service.OrderService$$SpringCGLIB$$0.orderDelivery(<generated>)
	at xin.eason.trigger.http.PayController.groupBuyNotify(PayController.java:126)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-03-14.22:19:18.208 [http-nio-8081-exec-9] INFO  PayPort                - 拼团订单结算, userId: Eason8, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason8, outerOrderId=993344055012, payTime=2025-03-14T22:19:18.102545600), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason8, outerOrderId=993344055012, teamId=89740791, activityId=100123))
25-03-14.22:20:03.824 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.22:20:04.386 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.22:20:04.387 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.22:20:04.460 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.22:20:04.463 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-03-14.22:20:04.474 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-03-14.22:20:08.446 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 114492 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.22:20:08.446 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.22:20:09.248 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.22:20:09.261 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.22:20:09.263 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.22:20:09.264 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.22:20:09.316 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.22:20:09.316 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 836 ms
25-03-14.22:20:09.988 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.22:20:10.233 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.22:20:10.246 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.22:20:10.248 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.22:20:10.281 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4f235107:0/SimpleConnection@5c79c5ec [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=61814]
25-03-14.22:20:10.317 [main            ] INFO  Application            - Started Application in 2.258 seconds (process running for 2.91)
25-03-14.22:21:00.174 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.22:21:00.174 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.22:21:00.175 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.22:21:00.238 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.22:21:00.242 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.22:21:00.387 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@173b0277
25-03-14.22:21:00.389 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.22:21:00.567 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单锁定, userId: Eason8, request: LockMarketPayOrderRequestDTO(userId=Eason8, teamId=89740791, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=175595963311, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=982651804517, teamId=89740791, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:21:00.675 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='175595963311', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Qgsh%2FJt0j3cOmfUJHL%2FoNSInHB5hh%2FQx5CpcUKYa%2FEKFdwhBdZPrqwNp9cKRS9fB%2BWhQl2oTaCAEbpQXPIZ97y2DNGUpuzyTEVaDaXN4GXM%2F5NtCZG2f0l%2BzB%2FnYjH7OgZB6E13ML%2B8k14%2BEcg%2BLLyrAJYfn1xHxyaARX7fvMriYCTw36biVD5HAVrPTg5OI8d%2FGMFTeRk0APL1yrq9bLJEPzWH2Jk6PJFuX50sBYiw3Q5iZCy6nrBiGIX%2BCyAsmlOtfjbDWISZ%2FWl4GqepjO9xBP16EfFd%2BzY7K8tJQcw0n4arlaWo5DxfrI5k6eM0X0MFiApVhxsWL6paL0BboFw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A21%3A00&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;175595963311&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:21:00.681 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Qgsh%2FJt0j3cOmfUJHL%2FoNSInHB5hh%2FQx5CpcUKYa%2FEKFdwhBdZPrqwNp9cKRS9fB%2BWhQl2oTaCAEbpQXPIZ97y2DNGUpuzyTEVaDaXN4GXM%2F5NtCZG2f0l%2BzB%2FnYjH7OgZB6E13ML%2B8k14%2BEcg%2BLLyrAJYfn1xHxyaARX7fvMriYCTw36biVD5HAVrPTg5OI8d%2FGMFTeRk0APL1yrq9bLJEPzWH2Jk6PJFuX50sBYiw3Q5iZCy6nrBiGIX%2BCyAsmlOtfjbDWISZ%2FWl4GqepjO9xBP16EfFd%2BzY7K8tJQcw0n4arlaWo5DxfrI5k6eM0X0MFiApVhxsWL6paL0BboFw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A21%3A00&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;175595963311&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:21:00.681 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason8 orderId: 175595963311 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Qgsh%2FJt0j3cOmfUJHL%2FoNSInHB5hh%2FQx5CpcUKYa%2FEKFdwhBdZPrqwNp9cKRS9fB%2BWhQl2oTaCAEbpQXPIZ97y2DNGUpuzyTEVaDaXN4GXM%2F5NtCZG2f0l%2BzB%2FnYjH7OgZB6E13ML%2B8k14%2BEcg%2BLLyrAJYfn1xHxyaARX7fvMriYCTw36biVD5HAVrPTg5OI8d%2FGMFTeRk0APL1yrq9bLJEPzWH2Jk6PJFuX50sBYiw3Q5iZCy6nrBiGIX%2BCyAsmlOtfjbDWISZ%2FWl4GqepjO9xBP16EfFd%2BzY7K8tJQcw0n4arlaWo5DxfrI5k6eM0X0MFiApVhxsWL6paL0BboFw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A21%3A00&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;175595963311&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:21:00.695 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.22:21:37.391 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505855116
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，商户订单号: 175595963311
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:21:33
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:21:37.392 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付回调，更新订单 175595963311
25-03-14.22:21:47.437 [http-nio-8081-exec-3] ERROR PayPort                - 营销结算失败 userId: Eason8, orderItemId: 175595963311
java.net.SocketTimeoutException: timeout
	at okio.Okio$4.newTimeoutException(Okio.java:232)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:286)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.settlementMarketOrder(PayPort.java:156)
	at xin.eason.domain.order.service.AbstractOrderService.orderPaySuccess(AbstractOrderService.java:120)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723)
	at xin.eason.domain.order.service.OrderService$$SpringCGLIB$$0.orderPaySuccess(<generated>)
	at xin.eason.trigger.http.PayController.alipayNotify(PayController.java:106)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.SocketTimeoutException: Read timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:288)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:314)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	... 81 common frames omitted
25-03-14.22:21:47.439 [http-nio-8081-exec-3] ERROR PayController          - 支付宝回调处理失败! 错误信息: 

java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:208)
	at java.base/java.util.ImmutableCollections$List12.<init>(ImmutableCollections.java:556)
	at java.base/java.util.List.of(List.java:812)
	at xin.eason.domain.order.service.AbstractOrderService.orderPaySuccess(AbstractOrderService.java:121)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723)
	at xin.eason.domain.order.service.OrderService$$SpringCGLIB$$0.orderPaySuccess(<generated>)
	at xin.eason.trigger.http.PayController.alipayNotify(PayController.java:106)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-03-14.22:21:49.992 [http-nio-8081-exec-7] INFO  PayController          - 接收到拼团系统回调 requestParam: GroupBuyNotifyDTO(teamId=89740791, outerOrderId=[600378214182, 792341380159, 175595963311])
25-03-14.22:21:50.024 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  OrderSuccessListener   - 已收到支付成功回调 MQ 消息: 600378214182
25-03-14.22:21:55.055 [AMQP Connection 192.168.226.128:5672] INFO  AbstractPayEvent       - 发送成功! 返回: Confirm [ack=true]
25-03-14.22:21:55.156 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR PayPort                - 发送模板信息失败! 错误代码: 41001, 错误信息: access_token missing rid: 67d43b80-30c16a7e-6a8f3d62
25-03-14.22:21:55.156 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR OrderSuccessListener   - 更新支付成功订单信息出错! 订单ID: 600378214182
25-03-14.22:21:55.156 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  OrderSuccessListener   - 已收到支付成功回调 MQ 消息: 792341380159
25-03-14.22:21:55.200 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR PayPort                - 发送模板信息失败! 错误代码: 41001, 错误信息: access_token missing rid: 67d43b80-06218c0a-109f6e0b
25-03-14.22:21:55.201 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR OrderSuccessListener   - 更新支付成功订单信息出错! 订单ID: 792341380159
25-03-14.22:21:55.201 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  OrderSuccessListener   - 已收到支付成功回调 MQ 消息: 175595963311
25-03-14.22:21:55.246 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR PayPort                - 发送模板信息失败! 错误代码: 41001, 错误信息: access_token missing rid: 67d43b80-4142cf51-619aa6aa
25-03-14.22:21:55.247 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR OrderSuccessListener   - 更新支付成功订单信息出错! 订单ID: 175595963311
25-03-14.22:23:36.526 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.22:23:39.877 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 28976 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.22:23:39.878 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.22:23:40.690 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.22:23:40.700 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.22:23:40.700 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.22:23:40.700 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.22:23:40.754 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.22:23:40.755 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 849 ms
25-03-14.22:23:41.402 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.22:23:41.637 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.22:23:41.651 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.22:23:41.652 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.22:23:41.687 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#31efacad:0/SimpleConnection@4348fa35 [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=59666]
25-03-14.22:23:41.730 [main            ] INFO  Application            - Started Application in 2.238 seconds (process running for 2.631)
25-03-14.22:26:35.639 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.22:26:35.639 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.22:26:35.640 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.22:26:35.711 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.22:26:35.716 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.22:26:35.899 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6c1ff0cf
25-03-14.22:26:35.901 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.22:26:36.315 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单锁定, userId: Eason4, request: LockMarketPayOrderRequestDTO(userId=Eason4, teamId=, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=670966334072, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=694885806546, teamId=06895518, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:26:36.415 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='670966334072', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=LJ4FLyyVTO28M%2BpJLJ9fcB47%2BD6YhElXzdNtaynaZp56KO9KcUyWL3PWfbJkNJ6d%2B7nwhIOIeSjFmwekYqtRvynYI%2BNAzZBGGHAGkx2GrW776MH21QP7IgRTU5SnzXtaUyLMi4AijCmfabpns5xJgAQn3OUX2cyZZMgngw1dddSL9r7SsxcpxVyUepp27TF2AQPaplIxC8BBu%2BiKyhR8jl3atY9xX%2F3irnzNDITBCXQKyO%2Bpdv77JPngG3XtrLXx42mBZBD6%2BFHw9xS8WYuql7iRsgkZCU9%2FFVKbWWWGXuVBys%2FkVPEx4E%2FqKtcMCsicJQUhbGP5UCCXa8Zx8OY47Q%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A26%3A36&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;670966334072&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:26:36.427 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=LJ4FLyyVTO28M%2BpJLJ9fcB47%2BD6YhElXzdNtaynaZp56KO9KcUyWL3PWfbJkNJ6d%2B7nwhIOIeSjFmwekYqtRvynYI%2BNAzZBGGHAGkx2GrW776MH21QP7IgRTU5SnzXtaUyLMi4AijCmfabpns5xJgAQn3OUX2cyZZMgngw1dddSL9r7SsxcpxVyUepp27TF2AQPaplIxC8BBu%2BiKyhR8jl3atY9xX%2F3irnzNDITBCXQKyO%2Bpdv77JPngG3XtrLXx42mBZBD6%2BFHw9xS8WYuql7iRsgkZCU9%2FFVKbWWWGXuVBys%2FkVPEx4E%2FqKtcMCsicJQUhbGP5UCCXa8Zx8OY47Q%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A26%3A36&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;670966334072&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:26:36.427 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason4 orderId: 670966334072 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=LJ4FLyyVTO28M%2BpJLJ9fcB47%2BD6YhElXzdNtaynaZp56KO9KcUyWL3PWfbJkNJ6d%2B7nwhIOIeSjFmwekYqtRvynYI%2BNAzZBGGHAGkx2GrW776MH21QP7IgRTU5SnzXtaUyLMi4AijCmfabpns5xJgAQn3OUX2cyZZMgngw1dddSL9r7SsxcpxVyUepp27TF2AQPaplIxC8BBu%2BiKyhR8jl3atY9xX%2F3irnzNDITBCXQKyO%2Bpdv77JPngG3XtrLXx42mBZBD6%2BFHw9xS8WYuql7iRsgkZCU9%2FFVKbWWWGXuVBys%2FkVPEx4E%2FqKtcMCsicJQUhbGP5UCCXa8Zx8OY47Q%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A26%3A36&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;670966334072&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:26:36.437 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.22:26:58.470 [http-nio-8081-exec-3] INFO  PayController          - 正在创建订单...
25-03-14.22:26:58.549 [http-nio-8081-exec-3] INFO  PayPort                - 拼团订单锁定, userId: Eason5, request: LockMarketPayOrderRequestDTO(userId=Eason5, teamId=06895518, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=421766581763, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=301506823637, teamId=06895518, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:26:58.557 [http-nio-8081-exec-3] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='421766581763', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=E%2F9mLZwHEYoYYLLTLsv%2BcTXRpzSL9fIs8ZTdSiPs5iGv14TYqpG7fxDD5ClnEVTu71J0dFZBklDiO%2Fw%2BGP8TUtnNrnGa8uN86qwwaXRMwiDcaPaGv7AgMDBVr7IavEqhKaI5%2FtNdeE8jnY7Y%2FcYe1wzfq94ldgxx7IlZJs2tPjJDAc6PpRh8xvl4w14Y8Uq7%2BPYLG5noiW0L2Lt3U7VKzM46zcOJ6QwWkmReuA1Q2MqCYzW2GELWCdr2JX1ciq0JtWna39XgQqHottoECA%2FMwq%2FBg9wj2AX%2FeXOXEBNYSrfN2nx7D85qEZFBOmEv4Dm%2FuWJWRGLUiOsCxS2liLt3cg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A26%3A58&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;421766581763&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:26:58.561 [http-nio-8081-exec-3] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=E%2F9mLZwHEYoYYLLTLsv%2BcTXRpzSL9fIs8ZTdSiPs5iGv14TYqpG7fxDD5ClnEVTu71J0dFZBklDiO%2Fw%2BGP8TUtnNrnGa8uN86qwwaXRMwiDcaPaGv7AgMDBVr7IavEqhKaI5%2FtNdeE8jnY7Y%2FcYe1wzfq94ldgxx7IlZJs2tPjJDAc6PpRh8xvl4w14Y8Uq7%2BPYLG5noiW0L2Lt3U7VKzM46zcOJ6QwWkmReuA1Q2MqCYzW2GELWCdr2JX1ciq0JtWna39XgQqHottoECA%2FMwq%2FBg9wj2AX%2FeXOXEBNYSrfN2nx7D85qEZFBOmEv4Dm%2FuWJWRGLUiOsCxS2liLt3cg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A26%3A58&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;421766581763&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:26:58.561 [http-nio-8081-exec-3] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason5 orderId: 421766581763 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=E%2F9mLZwHEYoYYLLTLsv%2BcTXRpzSL9fIs8ZTdSiPs5iGv14TYqpG7fxDD5ClnEVTu71J0dFZBklDiO%2Fw%2BGP8TUtnNrnGa8uN86qwwaXRMwiDcaPaGv7AgMDBVr7IavEqhKaI5%2FtNdeE8jnY7Y%2FcYe1wzfq94ldgxx7IlZJs2tPjJDAc6PpRh8xvl4w14Y8Uq7%2BPYLG5noiW0L2Lt3U7VKzM46zcOJ6QwWkmReuA1Q2MqCYzW2GELWCdr2JX1ciq0JtWna39XgQqHottoECA%2FMwq%2FBg9wj2AX%2FeXOXEBNYSrfN2nx7D85qEZFBOmEv4Dm%2FuWJWRGLUiOsCxS2liLt3cg%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A26%3A58&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;421766581763&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:26:58.569 [http-nio-8081-exec-3] INFO  PayController          - 创建订单成功!
25-03-14.22:27:04.890 [http-nio-8081-exec-5] INFO  PayController          - 正在创建订单...
25-03-14.22:27:04.968 [http-nio-8081-exec-5] INFO  PayPort                - 拼团订单锁定, userId: Eason6, request: LockMarketPayOrderRequestDTO(userId=Eason6, teamId=06895518, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=130846553871, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=727573750262, teamId=06895518, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:27:04.977 [http-nio-8081-exec-5] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='130846553871', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Vvsye%2FcNQC%2FFKKwb0nhLvq%2B9BT8RmafPKYxV%2FDSMwjf0iNv0nqNSKVj1U%2FWID%2FuMuH7v7K%2FncxiTRTZirgZE0whw%2BcllD%2F67IQqLM%2B1H6Zs%2B0%2BkR4VAY1On1GGMp%2FBfw8EsruobAQ2%2FlF8GZux6Wytt%2FArKY4fS%2BBAU6IoLMQZR%2BKU3yLz1wqSpwoMNp091DarZHrC%2FSkbvoRAR4imjRPQps3C5jiI7kYmHEwJiJRvx2tdixZGz7crfvtvQwFOaizkdiqWl7PUk1%2BvWfp5PfnpJREezCpHUfuXkO6j5VMuRkdl8OhfOtFQ%2BF2Ru%2FLRqv7tfiQXwTlbAKp6Osl59kow%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A27%3A04&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;130846553871&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:27:04.984 [http-nio-8081-exec-5] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Vvsye%2FcNQC%2FFKKwb0nhLvq%2B9BT8RmafPKYxV%2FDSMwjf0iNv0nqNSKVj1U%2FWID%2FuMuH7v7K%2FncxiTRTZirgZE0whw%2BcllD%2F67IQqLM%2B1H6Zs%2B0%2BkR4VAY1On1GGMp%2FBfw8EsruobAQ2%2FlF8GZux6Wytt%2FArKY4fS%2BBAU6IoLMQZR%2BKU3yLz1wqSpwoMNp091DarZHrC%2FSkbvoRAR4imjRPQps3C5jiI7kYmHEwJiJRvx2tdixZGz7crfvtvQwFOaizkdiqWl7PUk1%2BvWfp5PfnpJREezCpHUfuXkO6j5VMuRkdl8OhfOtFQ%2BF2Ru%2FLRqv7tfiQXwTlbAKp6Osl59kow%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A27%3A04&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;130846553871&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:27:04.984 [http-nio-8081-exec-5] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason6 orderId: 130846553871 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=Vvsye%2FcNQC%2FFKKwb0nhLvq%2B9BT8RmafPKYxV%2FDSMwjf0iNv0nqNSKVj1U%2FWID%2FuMuH7v7K%2FncxiTRTZirgZE0whw%2BcllD%2F67IQqLM%2B1H6Zs%2B0%2BkR4VAY1On1GGMp%2FBfw8EsruobAQ2%2FlF8GZux6Wytt%2FArKY4fS%2BBAU6IoLMQZR%2BKU3yLz1wqSpwoMNp091DarZHrC%2FSkbvoRAR4imjRPQps3C5jiI7kYmHEwJiJRvx2tdixZGz7crfvtvQwFOaizkdiqWl7PUk1%2BvWfp5PfnpJREezCpHUfuXkO6j5VMuRkdl8OhfOtFQ%2BF2Ru%2FLRqv7tfiQXwTlbAKp6Osl59kow%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A27%3A04&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;130846553871&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:27:05.004 [http-nio-8081-exec-5] INFO  PayController          - 创建订单成功!
25-03-14.22:28:07.687 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505851351
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，商户订单号: 670966334072
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:28:03
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:28:07.688 [http-nio-8081-exec-8] INFO  PayController          - 支付回调，支付回调，更新订单 670966334072
25-03-14.22:28:07.757 [http-nio-8081-exec-8] INFO  PayPort                - 拼团订单结算, userId: Eason4, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=670966334072, payTime=2025-03-14T22:28:07.688329700), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason4, outerOrderId=670966334072, teamId=06895518, activityId=100123))
25-03-14.22:29:13.640 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505856123
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，商户订单号: 421766581763
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:29:09
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:29:13.641 [http-nio-8081-exec-9] INFO  PayController          - 支付回调，支付回调，更新订单 421766581763
25-03-14.22:29:13.694 [http-nio-8081-exec-9] INFO  PayPort                - 拼团订单结算, userId: Eason5, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason5, outerOrderId=421766581763, payTime=2025-03-14T22:29:13.641281), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason5, outerOrderId=421766581763, teamId=06895518, activityId=100123))
25-03-14.22:32:53.467 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-03-14.22:32:54.007 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-03-14.22:32:54.008 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-03-14.22:32:54.114 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-03-14.22:32:54.123 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-03-14.22:32:54.142 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-03-14.22:33:00.530 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 165504 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.22:33:00.530 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.22:33:01.457 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.22:33:01.469 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.22:33:01.470 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.22:33:01.470 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.22:33:01.540 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.22:33:01.541 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 976 ms
25-03-14.22:33:02.344 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.22:33:02.588 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.22:33:02.601 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.22:33:02.604 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.22:33:02.680 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#31efacad:0/SimpleConnection@4348fa35 [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=63460]
25-03-14.22:33:02.744 [main            ] INFO  Application            - Started Application in 2.679 seconds (process running for 3.204)
25-03-14.22:33:17.067 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.22:33:17.067 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.22:33:17.069 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-03-14.22:33:17.090 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505857530
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，商户订单号: 130846553871
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:33:13
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:33:17.096 [http-nio-8081-exec-1] INFO  PayController          - 支付回调，支付回调，更新订单 130846553871
25-03-14.22:33:17.157 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.22:33:17.319 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7dc1e36c
25-03-14.22:33:17.322 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.22:33:27.450 [http-nio-8081-exec-1] ERROR PayPort                - 营销结算失败 userId: Eason6, orderItemId: 130846553871
java.net.SocketTimeoutException: timeout
	at okio.Okio$4.newTimeoutException(Okio.java:232)
	at okio.AsyncTimeout.exit(AsyncTimeout.java:286)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:241)
	at okio.RealBufferedSource.indexOf(RealBufferedSource.java:358)
	at okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.java:230)
	at okhttp3.internal.http1.Http1ExchangeCodec.readHeaderLine(Http1ExchangeCodec.java:242)
	at okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.java:213)
	at okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.java:115)
	at okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:43)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)
	at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)
	at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)
	at okhttp3.RealCall.execute(RealCall.java:81)
	at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)
	at xin.eason.infrastructure.adapter.port.PayPort.settlementMarketOrder(PayPort.java:156)
	at xin.eason.domain.order.service.AbstractOrderService.orderPaySuccess(AbstractOrderService.java:120)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723)
	at xin.eason.domain.order.service.OrderService$$SpringCGLIB$$0.orderPaySuccess(<generated>)
	at xin.eason.trigger.http.PayController.alipayNotify(PayController.java:106)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.net.SocketException: Socket closed
	at java.base/sun.nio.ch.NioSocketImpl.endRead(NioSocketImpl.java:253)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:332)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:355)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:808)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:966)
	at okio.Okio$2.read(Okio.java:140)
	at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)
	... 81 common frames omitted
25-03-14.22:33:27.452 [http-nio-8081-exec-1] ERROR PayController          - 支付宝回调处理失败! 错误信息: 

java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:208)
	at java.base/java.util.ImmutableCollections$List12.<init>(ImmutableCollections.java:556)
	at java.base/java.util.List.of(List.java:812)
	at xin.eason.domain.order.service.AbstractOrderService.orderPaySuccess(AbstractOrderService.java:121)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:723)
	at xin.eason.domain.order.service.OrderService$$SpringCGLIB$$0.orderPaySuccess(<generated>)
	at xin.eason.trigger.http.PayController.alipayNotify(PayController.java:106)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:257)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1088)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:842)
25-03-14.22:34:24.087 [http-nio-8081-exec-3] INFO  PayController          - 正在创建订单...
25-03-14.22:34:56.241 [main            ] INFO  Application            - Starting Application using Java 17.0.13 with PID 147368 (D:\Code\codes\s-pay-mall-ddd-eason\s-pay-mall-ddd-eason-app\target\classes started by Eason in D:\Code\codes\s-pay-mall-ddd-eason)
25-03-14.22:34:56.241 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-03-14.22:34:57.120 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8081 (http)
25-03-14.22:34:57.131 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8081"]
25-03-14.22:34:57.132 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-03-14.22:34:57.133 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.34]
25-03-14.22:34:57.198 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-03-14.22:34:57.198 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 926 ms
25-03-14.22:34:57.949 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-03-14.22:34:58.241 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8081"]
25-03-14.22:34:58.261 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8081 (http) with context path '/'
25-03-14.22:34:58.263 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.226.128:5672]
25-03-14.22:34:58.306 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#101bdd1c:0/SimpleConnection@2b99c937 [delegate=amqp://s-pay-mall@192.168.226.128:5672//s-pay-mall, localPort=63744]
25-03-14.22:34:58.355 [main            ] INFO  Application            - Started Application in 2.545 seconds (process running for 3.042)
25-03-14.22:35:10.183 [http-nio-8081-exec-1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-03-14.22:35:10.183 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-03-14.22:35:10.184 [http-nio-8081-exec-1] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-03-14.22:35:10.258 [http-nio-8081-exec-1] INFO  PayController          - 正在创建订单...
25-03-14.22:35:10.263 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-03-14.22:35:10.429 [http-nio-8081-exec-1] INFO  HikariPool             - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23e4ec11
25-03-14.22:35:10.431 [http-nio-8081-exec-1] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-03-14.22:35:10.831 [http-nio-8081-exec-1] INFO  PayPort                - 拼团订单锁定, userId: Eason6, request: LockMarketPayOrderRequestDTO(userId=Eason6, teamId=06895518, activityId=100123, goodsId=9890001, source=s01, channel=c01, outerOrderId=647630373915, notifyUrl=http://127.0.0.1:8081/api/v1/alipay/group_buy_notify), response: Result(msg=success, code=1, data=LockMarketPayOrderResponseDTO(orderId=452681522580, teamId=06895518, originalPrice=null, discountPrice=10.00, payPrice=90.00, tradeOrderStatus=0))
25-03-14.22:35:10.946 [http-nio-8081-exec-1] INFO  OrderService           - 创建支付订单成功, payOrder: PayOrderEntity{userId='null', orderId='647630373915', payUrl='<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=R49CWrVTylCk4SjfAFzN%2BGFjAB0ZjARc9AnMDVcIEz%2BXkevdryDnarizFA2KrLetJkUUVBPrbmP4ogYMPbL%2BiXLPZFf5UopJZ3gDQYv9N5QbX09H2xBuHva%2FxkhUpnFO9scQ27AvymRVY0%2BE31Ob3scU8Z1n1fYABR2gCrYHFGpysuZR73BBBDIHz1GHSuiT2HoaBhsMz8u0n%2B8QE5GEha07FSZOh74krmFS8L5%2FWV0yrkQJXjnoKt5iRc9WfL9Lrt%2FLH6NBQQBOBDhz%2Fl4CY%2B7WRnNm0D1wUdtKxjU3Gv%2F2Nq8fG6eZIU9WISw9PnAzq93hQcedCuYcLsvBYPAVlw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A35%3A10&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;647630373915&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>', orderStatus=PAY_WAITE}
25-03-14.22:35:10.956 [http-nio-8081-exec-1] INFO  OrderService           - 支付 URL: 
<form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=R49CWrVTylCk4SjfAFzN%2BGFjAB0ZjARc9AnMDVcIEz%2BXkevdryDnarizFA2KrLetJkUUVBPrbmP4ogYMPbL%2BiXLPZFf5UopJZ3gDQYv9N5QbX09H2xBuHva%2FxkhUpnFO9scQ27AvymRVY0%2BE31Ob3scU8Z1n1fYABR2gCrYHFGpysuZR73BBBDIHz1GHSuiT2HoaBhsMz8u0n%2B8QE5GEha07FSZOh74krmFS8L5%2FWV0yrkQJXjnoKt5iRc9WfL9Lrt%2FLH6NBQQBOBDhz%2Fl4CY%2B7WRnNm0D1wUdtKxjU3Gv%2F2Nq8fG6eZIU9WISw9PnAzq93hQcedCuYcLsvBYPAVlw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A35%3A10&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;647630373915&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script>
25-03-14.22:35:10.956 [http-nio-8081-exec-1] INFO  AbstractOrderService   - 创建订单-完成，生成支付单。userId: Eason6 orderId: 647630373915 payUrl: <form name="punchout_form" method="post" action="https://openapi-sandbox.dl.alipaydev.com/gateway.do?charset=utf-8&method=alipay.trade.page.pay&sign=R49CWrVTylCk4SjfAFzN%2BGFjAB0ZjARc9AnMDVcIEz%2BXkevdryDnarizFA2KrLetJkUUVBPrbmP4ogYMPbL%2BiXLPZFf5UopJZ3gDQYv9N5QbX09H2xBuHva%2FxkhUpnFO9scQ27AvymRVY0%2BE31Ob3scU8Z1n1fYABR2gCrYHFGpysuZR73BBBDIHz1GHSuiT2HoaBhsMz8u0n%2B8QE5GEha07FSZOh74krmFS8L5%2FWV0yrkQJXjnoKt5iRc9WfL9Lrt%2FLH6NBQQBOBDhz%2Fl4CY%2B7WRnNm0D1wUdtKxjU3Gv%2F2Nq8fG6eZIU9WISw9PnAzq93hQcedCuYcLsvBYPAVlw%3D%3D&return_url=https%3A%2F%2Fgaga.plus&notify_url=http%3A%2F%2Feason.nat300.top%2Fapi%2Fv1%2Falipay%2Falipay_notify_url&version=1.0&app_id=9021000143682740&sign_type=RSA2&timestamp=2025-03-14+22%3A35%3A10&alipay_sdk=alipay-sdk-java-4.38.157.ALL&format=json">
<input type="hidden" name="biz_content" value="{&quot;out_trade_no&quot;:&quot;647630373915&quot;,&quot;total_amount&quot;:&quot;100.00&quot;,&quot;subject&quot;:&quot;<手写MyBatis：渐进式源码实践>&quot;,&quot;product_code&quot;:&quot;FAST_INSTANT_TRADE_PAY&quot;}">
<input type="submit" value="立即支付" style="display:none" >
</form>
<script>document.forms[0].submit();</script> discount: MarketPayDiscountEntity(originalAmount=null, deductionAmount=10.00, payAmount=90.00)
25-03-14.22:35:10.971 [http-nio-8081-exec-1] INFO  PayController          - 创建订单成功!
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，消息接收 TRADE_SUCCESS
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易名称: <手写MyBatis：渐进式源码实践>
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易状态: TRADE_SUCCESS
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付宝交易凭证号: 2025031422001492730505855117
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，商户订单号: 647630373915
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，交易金额: 100.00
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家在支付宝唯一id: 2088722057192739
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款时间: 2025-03-14 22:35:49
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，买家付款金额: 100.00
25-03-14.22:35:53.200 [http-nio-8081-exec-3] INFO  PayController          - 支付回调，支付回调，更新订单 647630373915
25-03-14.22:35:53.442 [http-nio-8081-exec-4] INFO  PayController          - 接收到拼团系统回调 requestParam: GroupBuyNotifyDTO(teamId=06895518, outerOrderId=[670966334072, 421766581763, 647630373915])
25-03-14.22:35:53.474 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  OrderSuccessListener   - 已收到支付成功回调 MQ 消息: 670966334072
25-03-14.22:35:53.481 [AMQP Connection 192.168.226.128:5672] INFO  AbstractPayEvent       - 发送成功! 返回: Confirm [ack=true]
25-03-14.22:35:53.530 [http-nio-8081-exec-3] INFO  PayPort                - 拼团订单结算, userId: Eason6, request: SettlementOrderRequestDTO(source=s01, channel=c01, userId=Eason6, outerOrderId=647630373915, payTime=2025-03-14T22:35:53.200549700), response: Result(msg=success, code=1, data=SettlementOrderResponseDTO(source=s01, channel=c01, userId=Eason6, outerOrderId=647630373915, teamId=06895518, activityId=100123))
25-03-14.22:35:53.570 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR PayPort                - 发送模板信息失败! 错误代码: 41001, 错误信息: access_token missing rid: 67d43ec7-12ca362f-67cbdb30
25-03-14.22:35:53.570 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR OrderSuccessListener   - 更新支付成功订单信息出错! 订单ID: 670966334072
25-03-14.22:35:53.571 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  OrderSuccessListener   - 已收到支付成功回调 MQ 消息: 421766581763
25-03-14.22:35:53.624 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR PayPort                - 发送模板信息失败! 错误代码: 41001, 错误信息: access_token missing rid: 67d43ec7-1f017cb3-2c10cbf0
25-03-14.22:35:53.624 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR OrderSuccessListener   - 更新支付成功订单信息出错! 订单ID: 421766581763
25-03-14.22:35:53.624 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  OrderSuccessListener   - 已收到支付成功回调 MQ 消息: 647630373915
25-03-14.22:35:53.664 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR PayPort                - 发送模板信息失败! 错误代码: 41001, 错误信息: access_token missing rid: 67d43ec7-6fd937e8-629eee7d
25-03-14.22:35:53.664 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] ERROR OrderSuccessListener   - 更新支付成功订单信息出错! 订单ID: 647630373915
